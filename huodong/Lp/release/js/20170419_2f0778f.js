require.config(requireConfig),require(["jquery","fastClick","FullPage","ct","bridge","juicer","Vue","axios"],function(t,e,s,i,o,a,g,r){var n=(t(".mask"),Object.create(i.Prompt));n.create().build();var c,u=(i.Tool.local(),i.Tool.userAgent());i.Tool.buryPoint();var l={status:{login:!1,msg:""},charge:{loan:null,type:null,pay:null},start:function(){var t=this;e.attach(document.body),i.Tool.setFont(),window.addEventListener("resize",i.Tool.debounce(i.Tool.setFont)),window.addEventListener("resize",i.Tool.debounce(i.Tool.handleBottomStatusBar));var s=Object.create(i.PreLodingUi);s.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),i.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var e=null;clearTimeout(e),e=setTimeout(function(){s.hide(),t.init()},500)}})},init:function(){t(".wp").removeClass("hide"),u.isGjj&&o&&o.action("quickIcon",{thumb:"https://r.51gjj.com/image/static/ico_title_share_dark.png",onclick:function(){o.action("ShareTimeline",{title:"【蛋愿有奖】每日10000个彩蛋，砸中即中奖！",desc:"华为P10 plus／扫地机器人、腾讯视频会员天天送！",thumb:"https://r.51gjj.com/act/release/img/20170406_share.png",link:i.Tool.url("/act/home/huodong/20170419/index.php")})}}),r.post(i.Tool.url("/app/request/activity"),JSON.stringify({tag:"进入页面"+projectName,place_cid:u.isGjj?1:0}));window.vm=new g({el:".wp",data:{tvList:[],stateArr:[],eggList:[],clickNum:"",applyList:"",egg:{},history:"",restTime:"",maskStatus:!1,eggPopStatus:!1,myEggStatus:!1,myApplyStatus:!1,ruleStatus:!1},created:function(){this.getTvList(),this.getEggList()},mounted:function(){},methods:{getTvList:function(){var t=this;r.post(i.Tool.url("/act/act170419/get_status"),JSON.stringify({})).then(function(e){e.data.success&&(t.tvList=e.data.ret,t.tvList.list.forEach(function(e,s){e.today&&"[object Boolean]"==Object.prototype.toString.call(e.today)&&(t.clickNum=s)}),t.$nextTick(function(){t.setPosition(),t.setProcess()}))})},getEggList:function(){var t=this;r.post(i.Tool.url("/act/act170419/get_egg"),JSON.stringify({})).then(function(e){e.data.success&&(t.eggList=e.data.ret,t.$nextTick(function(){}))})},breakEgg:function(t,e){var s=this;console.log(t),0===t.eggType?r.post(i.Tool.url("/act/act170419/get_break"),JSON.stringify({eggid:t.eggid,operate:e})).then(function(t){return t.data.success?t.data.ret.end?(n.show("今天的蛋都被咋光了，明天请提早哦！"),!1):void(0===t.data.ret.rob?(s.$set(s.egg,"breakEgg",t.data.ret),s.egg.breakEgg.operateType=0,s.$nextTick(function(){t.data.ret.allow?(s.maskStatus=!0,s.eggPopStatus=!0,s.getEggList()):n.show("您已砸中彩蛋，完成申请领取对应奖励，返回后可继续砸蛋！",{duration:1500,callback:function(){s.getEggList(),s.getApplyList()}})})):n.show("手慢一步，此蛋已被砸，试试其他吧",{callback:function(){s.getEggList()}})):(n.show(t.data.msg,{callback:function(){9==t.data.code&&(window.location.href="http://d.51gjj.com/hd/")}}),!1)}):n.show("该蛋已被砸开，试试其他吧",{callback:function(){s.getEggList()}})},breakMyEgg:function(t,e){var s=this;if(s.myEggStatus=!1,console.log(t),3!==t.eggType&&4!==t.eggType){if(6===t.eggType)return void s.getApplyList();r.post(i.Tool.url("/act/act170419/get_break"),JSON.stringify({eggid:t.eggid,operate:e})).then(function(e){e.data.success&&(s.$set(s.egg,"breakEgg",e.data.ret),s.egg.breakEgg.operateType=2,s.$nextTick(function(){s.maskStatus=!0,s.eggPopStatus=!0,(1===t.eggType||2===t.eggType)&&s.timedown(s.egg.breakEgg.getTime,30,1),s.getEggList()}))})}else n.show("【我的彩蛋】里复活蛋和烟雾蛋不可点击查看哦！",{duration:2500,callback:function(){s.maskStatus=!1,s.myEggStatus=!1,s.getEggList()}})},robEgg:function(t,e,s){var o=this;o.myEggStatus=!1,r.post(i.Tool.url("/act/act170419/get_break"),JSON.stringify({eggid:e,operate:s,date:t.date})).then(function(s){s.data.success?(s.data.ret.robEggId=e,s.data.ret.date=t.date,o.$set(o.egg,"breakEgg",s.data.ret),o.egg.breakEgg.operateType=1,o.$nextTick(function(){s.data.ret.allow&&(o.maskStatus=!0,o.eggPopStatus=!0,o.getEggList(),o.timedown(o.egg.breakEgg.getTime,30,1))})):n.show(s.data.msg)})},getApplyList:function(){var t=this;r.post(i.Tool.url("/act/act170419/get_apply"),JSON.stringify({})).then(function(e){e.data.success&&(t.eggPopStatus=!1,t.maskStatus=!0,t.myApplyStatus=!0,t.applyList=e.data.ret,t.$nextTick(function(){}))})},apply:function(t){r.post(i.Tool.url("/act/act170419/get_url"),JSON.stringify({id:t.id})).then(function(e){e.data.success?r.post(i.Tool.url("/app/request/activity"),JSON.stringify({tag:t.title+projectName,place_cid:u.isGjj?1:0})).then(function(){window.location.href=e.data.ret.url}):n.show(d.data.msg)})},myEgg:function(){var t=this,e=null;r.post(i.Tool.url("/act/act170419/get_mine"),JSON.stringify({})).then(function(s){s.data.success&&(t.history=s.data.ret,t.maskStatus=!0,t.myEggStatus=!0,clearTimeout(e),e=setTimeout(t.getApplyList,1500))})},noRobAction:function(){var t=this,e=this.egg.breakEgg.eggType;1===e||2===e||6===e?this.getApplyList():3===e||4===e?(this.maskStatus=!1,this.eggPopStatus=!1,this.getEggList()):(console.log("查页蛋，仅在APP内可调用分享。这里表示无BUG"),u.isGjj&&o&&(o.action("ShareTimeline",{title:"【蛋愿有奖】每日10000个彩蛋，砸中即中奖！",desc:"华为P10 plus／扫地机器人、腾讯视频会员天天送！",thumb:"https://r.51gjj.com/act/release/img/20170406_share.png",link:i.Tool.url("/act/home/huodong/20170419/index.php")}),t.close()))},rob:function(){{var t=this,e=this.egg.breakEgg.eggType,s=this.egg.breakEgg.eggStatus;i.Tool.userAgent()}2===s?(1===e||2===e)&&r.post(i.Tool.url("/act/act170419/get_break"),JSON.stringify({eggid:t.egg.breakEgg.robEggId,operate:1,date:t.egg.breakEgg.date})).then(function(e){e.data.success?(t.$set(t.egg,"breakEgg",e.data.ret),t.egg.breakEgg.operateType=1,t.$nextTick(function(){e.data.ret.allow&&(t.maskStatus=!0,t.eggPopStatus=!0,n.show("好气哟，手太短，比别人慢一步！"),t.getEggList())})):n.show(e.data.msg)}):0===s?n.show("该蛋已被领取了"):1===s&&n.show("该蛋处在被占有状态")},eggArrGroup:function(t){return this.eggList.list?this.eggList.list.slice(5*(t-1),5*t):void 0},eggClass:function(t){switch(t){case 0:return"egg-no-break-box";case 1:return"egg-p10-box";case 2:return"egg-jqr-box";case 3:return"egg-fh-box";case 4:return"egg-yw-box";case 5:return"egg-cy-box";case 6:return"egg-sq-box"}},setPosition:function(){var e=this,s=[{zindex:1,width:"5.51rem",height:"3.49rem",top:"42%",left:"28%"},{zindex:1,width:"5.51rem",height:"3.49rem",top:"42%",left:"28%"},{zindex:1,width:"5.51rem",height:"3.49rem",top:"42%",left:"28%"},{zindex:4,width:"5.51rem",height:"3.49rem",top:"50%",left:"50%"},{zindex:1,width:"5.51rem",height:"3.49rem",top:"42%",left:"54%"},{zindex:1,width:"5.51rem",height:"3.49rem",top:"42%",left:"54%"},{zindex:1,width:"5.51rem",height:"3.49rem",top:"42%",left:"54%"}];this.stateArr=s;for(var i=0;i<this.tvList.list.length;i++)g.set(this.tvList.list[i],"zindex",s[i].zindex);var o=this.$refs.tvList,a=this.$refs.tvNext,r=this.$refs.tvPrev;this.$nextTick(function(){function s(){t(a).on("click",function(){e.clickNum<6&&e.clickNum>-1&&e.clickNum++})}function i(){t(r).on("click",function(){e.clickNum<=6&&e.clickNum>0&&e.clickNum--})}function g(){var t=null,s=function(e){t=e.changedTouches[0].clientX},i=function(t){t.preventDefault()},a=function(s){s.preventDefault();var i=s.changedTouches[0].clientX-t;console.log(i),i>10?e.clickNum<=6&&e.clickNum>0&&e.clickNum--:0>i&&-10>i&&e.clickNum<6&&e.clickNum>-1&&e.clickNum++};o.addEventListener("touchstart",s,!1),o.addEventListener("touchmove",i,!1),o.addEventListener("touchend",a,!1)}s(),i(),g()})},rest:function(t,e,s,i){var o="";return o=t.process&&s&&i&&e?1==i?t[e]/t.process*100+"%":t[e]/t.process*100+"%":"剩余"+Math.floor((1e4-t.process)/100)+"%"},setProcess:function(){var e=this.tvList.list,s=null;clearTimeout(s),s=setTimeout(function(){t(".process-line").each(function(s){t(this).css("width",e[s].process/100+"%")})},400)},eggHistoryGroup:function(t){return this.history.eggHistory?this.history.eggHistory.slice(3*(t-1),3*t):void 0},eggType:function(t){switch(t){case 1:return{cls:"my-xd",txt:"喜蛋",des:"华为P10"};case 2:return{cls:"my-ltd",txt:"邋遢蛋",des:"扫地机器人"};case 3:return{cls:"my-fhd",txt:"复活蛋",des:"再来一次"};case 4:return{cls:"my-ywd",txt:"烟雾蛋",des:"什么都没有"};case 5:return{cls:"my-cyd",txt:"查页蛋",des:"分享活动"};case 6:return{cls:"my-sqd",txt:"申请蛋",des:"申请业务赢会员"}}},resEggCls:function(t){switch(t){case 1:return{resCls:"res-xd",historyCls:"xd",txt:"砸中“喜蛋”",desc:"获得红色特别版iPhone 7，系统将为您占有30分钟，超时未领走将自动释放给其他用户争抢",howGetDesc:"完成申请活动中任意贷款或信用卡业务，即可锁定奖品，成功放款或发卡后开卡即可领取。"};case 2:return{resCls:"res-ltd",historyCls:"ltd",txt:"砸中“邋遢蛋”",desc:"获得扫地机器人，系统将为您占有30分钟，超时未领走将自动释放给其他用户争抢",howGetDesc:"完成申请活动中任意贷款或信用卡业务，即可锁定奖品，成功放款或发卡后开卡即可领取。"};case 3:return{resCls:"res-fhd",historyCls:"fhd",txt:"砸中“复活蛋”",desc:"复活一次砸蛋机会",howGetDesc:"您可返回活动继续砸蛋抽奖！"};case 4:return{resCls:"res-ywd",historyCls:"ywd",txt:"砸中“烟雾蛋”",desc:"您收到了空气",howGetDesc:"您已无法再继续活动，转发邀请朋友一起来玩吧！"};case 5:return{resCls:"res-cyd",historyCls:"cyd",txt:"砸中“查页蛋”",desc:"转发好友可继续",howGetDesc:"转发活动至一位微信好友（不可重复）即可返回活动继续砸蛋抽奖！"};case 6:return{resCls:"res-sqd",historyCls:"sqd",txt:"砸中“申请蛋”",desc:"每日前2000名申请即送腾讯视频会员<br/><br/>*成功申请浦发卡的用户可额外获得318元现金红包奖励<br/>*成功申请兴业卡的用户可额外获得50元话费奖励<br/>*成功申请金薪贷的用户可额外获得100元抵息券",howGetDesc:"申请活动中任意贷款或信用卡业务，完成提交即可返回活动继续砸蛋！"}}},close:function(){this.maskStatus=!1,this.myEggStatus=!1,this.eggPopStatus=!1,this.myApplyStatus=!1,this.getEggList()},showRule:function(){this.ruleStatus=!this.ruleStatus,this.maskStatus=!this.maskStatus},timedown:function(t,e,s){function i(){var a=(new Date,indexData.nowTime),g=t+60*e,r=g-a;if(0>r)return void console.log("30分钟倒计时已经结束了");indexData.nowTime++,console.log(r);var u;if(u=r>60?Math.floor(r/60):0,0==r){if(clearTimeout(c),console.log(s),0===s)return o.close(),void n.show("30分钟倒计时已结束啦，蛋蛋要飞啦！",{callback:function(){o.getEggList(),o.egg.breakEgg.eggStatus=2}});if(1===s)return void(o.egg.breakEgg.eggStatus=2)}var l=r%60,d=function(t){return 10>t&&t>=0?"0"+t:t};o.restTime=d(u)+":"+d(l),clearTimeout(c),c=setTimeout(i,1e3)}var o=this;return t?void i():(console.log("倒计时起始时间有问题"),!1)}},computed:{}})}};l.start()});