require.config(requireConfig),require(["jquery","fastClick","lucky-card","ct","bridge","juicer","marquee"],function(t,e,i,s,o){var c=(t(".mask"),Object.create(s.Prompt));c.create().build();var a=Object.create(s.Mask);a.create().build();s.Tool.local();s.Tool.buryPoint();var n=(new Date).getDay(),r="../static/img/20170703_",l={start:function(){var i=this;e.attach(document.body),s.Tool.setFont(),s.Tool.handleBottomStatusBar(),window.addEventListener("resize",s.Tool.debounce(s.Tool.setFont)),window.addEventListener("resize",s.Tool.debounce(s.Tool.handleBottomStatusBar));var o=Object.create(s.PreLodingUi);o.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),s.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var t=null;clearTimeout(t),t=setTimeout(function(){o.hide(),i.init()},500)}}),t.ajax({type:"POST",dataType:"JSON",url:s.Tool.url("/app/request/activity"),data:JSON.stringify({place_cid:s.Tool.userAgent().isGjj?1:0,tag:"进入页面"+projectName}),success:function(t){1==t.success}});var a=t(".list ul");t.ajax({type:"POST",dataType:"JSON",url:"test.php",data:JSON.stringify({action:"status"}),success:function(e){if(console.log("滚动条*************************"),1==e.success){if(console.log(111),e.ret.info){for(var s=e.ret.info,o=0;o<s.length;o++){var n=t("<li>");n.text(s[o].name),n.appendTo(a)}t(".list").liMarquee({hoverstop:!1,drag:!1,scrollamount:30,direction:"up",runshort:!0})}}else i.status.msg=e.msg||"出错请重试",c.show(e.msg||"出错请重试")},error:function(t){alert(t)}})},init:function(){var e=this;t(".wp").removeClass("hide"),e.openRule(),e.closeRule(),e.timeDown(),e.robTicket(),e.close_tip(),e.apply(),e.lookTicket(),e.share()},render:function(){t(".single-info"),t(".awards-info");t.ajax({url:"test.php",type:"POST",dataType:"json",data:JSON.stringify({action:"render"}),success:function(e){if(console.log(1111),1==e.success){var e=e.ret;e.UserTicket&&(1==e.UserTicket?(t(".rob200").addClass("grey"),t(".rob200").text("").text("已抢"),e.$ticketStatus_100?t(".rob100").addClass("grey"):(t(".rob100").addClass("grey"),t(".rob100").text("").text("抢完")),e.$ticketStatus_50?t(".rob50").addClass("grey"):(t(".rob50").addClass("grey"),t(".rob50").text("").text("抢完")),a.show(),t(".ticket_50").html("<img src='"+r+"ticket_200.png'><div class='ticket_close'></div><div class='skip'></div>"),t(".ticket_50").fadeIn()):2==e.UserTicket?(t(".rob100").addClass("grey"),t(".rob100").text("").text("已抢"),e.$ticketStatus_200?t(".rob200").addClass("grey"):(t(".rob200").addClass("grey"),t(".rob200").text("").text("抢完")),e.$ticketStatus_50?t(".rob50").addClass("grey"):(t(".rob50").addClass("grey"),t(".rob50").text("").text("抢完")),a.show(),t(".ticket_50").html("<img src='"+r+"ticket_100.png'><div class='ticket_close'></div><div class='skip'></div>"),t(".ticket_50").fadeIn()):3==e.UserTicket?(t(".rob50").addClass("grey"),t(".rob50").text("").text("已抢"),e.$ticketStatus_200?t(".rob200").addClass("grey"):(t(".rob200").addClass("grey"),t(".rob200").text("").text("抢完")),e.$ticketStatus_100?t(".rob100").addClass("grey"):(t(".rob100").addClass("grey"),t(".rob100").text("").text("抢完")),a.show(),t(".ticket_50").html("<img src='"+r+"ticket_50.png'><div class='ticket_close'></div><div class='skip'></div>"),t(".ticket_50").fadeIn()):(e.$ticketStatus_50?console.log("有50元券"):t(".rob50").addClass("grey"),e.$ticketStatus_100||t(".rob100").addClass("grey"),e.$ticketStatus_200||t(".rob200").addClass("grey")))}else c.show(e.msg||"获取不到中奖信息")},error:function(t){console.log(t)}})},robTicket:function(){var e=this;t(".rob200").on("click",function(){t.ajax({type:"POST",dataType:"json",url:"test.php",data:JSON.stringify({type:1}),success:function(i){if(1==i.success){var i=i.ret;console.debug("条件",i.allowRob,i.UserTicket),1==i.allowRob&&4===i.UserTicket?(a.show(),t(".ticket_50").html("<img src='"+r+"ticket_200.png'><div class='ticket_close'></div><div class='skip'></div>"),t(".ticket_50").fadeIn(),e.render()):c.show(i.msg||"出错请重试")}else 1==i.code?o&&o.action("login"):c.show(i.msg||"出错请重试")},error:function(t,e,i){alert(t.status),alert(t.readyState),alert(e),alert(JSON.stringify(t)),alert(i)}})}),t(".rob100").on("click",function(){t.ajax({type:"POST",dataType:"json",url:"test.php",data:JSON.stringify({type:2}),success:function(i){if(1==i.success){var i=i.ret;console.debug("条件",i.allowRob,i.UserTicket),1==i.allowRob&&4===i.UserTicket?(a.show(),t(".ticket_50").html("<img src='"+r+"ticket_100.png'><div class='ticket_close'></div><div class='skip'></div>"),t(".ticket_50").fadeIn(),e.render()):c.show(i.msg||"出错请重试")}else 1==i.code?o&&o.action("login"):c.show(i.msg||"出错请重试")},error:function(t,e,i){alert(i)}})}),t(".rob50").on("click",function(){t.ajax({type:"POST",dataType:"json",url:"test.php",data:JSON.stringify({type:3}),success:function(i){if(1==i.success){var i=i.ret;console.debug("条件",i.allowRob,i.UserTicket),1==i.allowRob&&4===i.UserTicket?(a.show(),t(".ticket_50").html("<img src='"+r+"ticket_50.png'><div class='ticket_close'></div><div class='skip'></div>"),t(".ticket_50").fadeIn(),e.render()):c.show(i.msg||"出错请重试")}else 1==i.code?o&&o.action("login"):c.show(i.msg||"出错请重试")},error:function(t,e,i){alert(i)}})})},apply:function(){t(".apply1").on("click",function(){var e={type:"1"};console.log("data",JSON.stringify(e)),e=JSON.stringify(e),t.ajax({type:"POST",dataType:"JSON",url:"test.php",data:JSON.stringify({type:1}),success:function(t){1==t.success?window.location.href=t.ret.url:c.show(1==t.code?t.msg:t.msg||"出错请重试")}})}),t(".apply2").on("click",function(){t.ajax({type:"POST",dataType:"JSON",url:"/act/act170406/get_url",data:JSON.stringify({type:2}),success:function(t){1==t.success?window.location.href=t.ret.url:c.show(1==t.code?t.msg:t.msg||"出错请重试")}})}),t(".apply3").on("click",function(){t.ajax({type:"POST",dataType:"JSON",url:"/act/act170406/get_url",data:JSON.stringify({type:3}),success:function(t){1==t.success?window.location.href=t.ret.url:c.show(1==t.code?t.msg:t.msg||"出错请重试")}})})},close_tip:function(){t(".ticket_50").on("click",".ticket_close",function(){t(".ticket_50").fadeOut(function(){a.hide()})})},openRule:function(){t(".content").on("click",".rule-btn",function(){a.show(),t(".rule").fadeIn()})},closeRule:function(){t("body").on("click",".btn-close",function(){t(".rule").fadeOut(function(){a.hide()})})},lookTicket:function(){t(".myTicket").on("click","span",function(){t(this).data("link");t.ajax({type:"POST",dataType:"JSON",url:"/act/act170406/get_url",data:JSON.stringify({type:4}),success:function(t){1==t.success?window.location.href=t.ret.url:c.show(t.msg||"出错请重试")}})})},share:function(){var t=navigator.userAgent,e={mobile:!!t.match(/AppleWebKit.*Mobile.*/),isAndroid:t.indexOf("Android")>-1||t.indexOf("Linux")>-1||t.indexOf("android")>-1,isiOS:/[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),webApp:-1==t.indexOf("Safari"),weixin:t.indexOf("MicroMessenger")>-1,isGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(t)||/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),isAndroidGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(t),isiOSGjj:/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),isGjjFdjsq:/^android\/[\w\W]+client\/[\w\W]+category\/51fdjsq$/.test(t)},i=window.location.host;return e.isGjj&&o&&o.action("quickIcon",{thumb:"https://r.51gjj.com/image/static/ico_title_share_dark.png",onclick:function(){o.action("ShareTimeline",{title:"抵息券X元 ",desc:"领券后完成活动页面任一业务申请并放款，还款时可直接抵扣，不可提前还款。【金薪贷】首月还款减免。【金花贷】首月还款减免，100元券借款5000元及以上可用，200元券借款10000元及以上可用。【金盈贷】分月减免，50元券分3个月减免，100元券、200元券分4个月减免。",thumb:"https://r.51gjj.com/act/release/img/20170523_share.png",link:"https://"+i+"/act/home/huodong/20170523/"})}}),this},timeDown:function(){function e(e){var i=new Array;i[0]=e.getHours(),i[1]=e.getMinutes(),i[2]=e.getSeconds();var s=60*i[0]*60+60*i[1]+i[2],o=86400-s,c=new Array;c[0]=parseInt(o/3600),console.log("小时",c[0]),c[1]=parseInt((o-60*c[0]*60)/60),console.log("分钟",c[1]),c[2]=o-60*c[0]*60-60*c[1],console.log("秒",c[2]),setInterval(function(){c[2]>0?c[2]--:(c[2]=59,c[1]>0?c[1]--:(c[1]=59,c[0]>0?c[0]--:c[0]=23));for(var e=new Array,i=0;3>i;++i)e[i]=String(c[i]),c[i]<10&&(e[i]="0"+e[i]);var s=e[0]+":"+e[1]+":"+e[2];t(".timeClock .nowTime").html(""),t(".timeClock .nowTime").append(s)},1e3)}2===n||3===n?(2===n?(e(new Date),t(".clockTip").text("距开始")):3===n&&t(".clockTip").text("距结束"),e(new Date)):(t(".clockTip").text("活动时间为每周三"),t(".timeClock img").remove())}};l.start()});