require.config(requireConfig),require(["jquery","fastClick","FullPage","ct","bridge","juicer"],function(e,t,a,n,o){var i=(e(".mask"),Object.create(n.Prompt));i.create().build();var l=Object.create(n.Mask);l.create().build();n.Tool.local(),n.Tool.userAgent().isGjj?1:0;n.Tool.buryPoint_v2(0);var r=null,g={start:function(){var e=this;t.attach(document.body),n.Tool.setFont(),n.Tool.handleBottomStatusBar(),window.addEventListener("resize",n.Tool.debounce(n.Tool.setFont)),window.addEventListener("resize",n.Tool.debounce(n.Tool.handleBottomStatusBar));var a=Object.create(n.PreLodingUi);a.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),n.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var t=null;clearTimeout(t),t=setTimeout(function(){a.hide(),e.init()},500)}})},init:function(){console.log("解析你的公积金活动");var t=this;t.setNavAttr(),e(".wp").removeClass("hide"),t.fullPageObj=t.fullpage(),t.getAnalysisData()},setNavAttr:function(){o&&o.action("setNavigationColor",{backgroundColor:"#e33d3b",textColor:"#fff",iconType:"1"})},PageBuryRequest:function(t){console.log("埋点：",t);var a=t.substring(4);e.ajax({type:"POST",dataType:"JSON",url:"/act/request/activity",data:JSON.stringify({source:n.Tool.userAgent().isGjj?1:0,tag:"20170807_"+a+"_0_0_进入页面"+t}),success:function(e){e.success}})},createPortrait:function(t){var a=new Image,n=["http://r.51gjj.com/act/release/img/20170807_page2_portrait4.png","http://r.51gjj.com/act/release/img/20170807_page2_portrait5.png","http://r.51gjj.com/act/release/img/20170807_page2_portrait6.png"],o=["http://r.51gjj.com/act/release/img/20170807_page2_portrait1.png","http://r.51gjj.com/act/release/img/20170807_page2_portrait2.png","http://r.51gjj.com/act/release/img/20170807_page2_portrait3.png"];a.src="男"==t.analyze1.gender?n[Math.floor(Math.random()*n.length)]:o[Math.floor(Math.random()*o.length)],e(".portrait").append(a)},getNumberImage:function(t,a){for(var n=t.toString(),o=0;len1=n.length,len1>o;o++){var i=new Image,l=e("<div class='img-wrap"+o+"'></div>");l.append(i);for(var r=0;o>=r;r++)i.src="http://r.51gjj.com/act/release/img/"+n[r]+"_new.png",e("."+a+" .div-container").append(l)}e(".div-container div img").css("page2"==a||"page7"==a?{width:".42rem",height:".68rem"}:{width:".27rem",height:".42rem"}),"page2"==a&&e(".page2 .div-container").append("<span class='ming'>名</span>"),"page7"==a&&e(".page7 .div-container").append("<span class='ming'>元</span>")},getAnalyzingData:function(t){var a=this;e(".page2 .detail1 span:first-child").text(t.name+"的公积金在"+t.analyze1.city+"市排名为"),a.getNumberImage(t.analyze1.ranking,"page2"),e(".page2 .gjj_number div:first-child span").text(t.analyze1.city+"缴纳公积金人口基数"),e(".page2 .detail2 span:nth-child(2)").text(t.analyze1.ranking_p+"%"),e(".page2 .detail2 span:nth-child(3)").text("的"+t.analyze1.city+"人"),e(".page3 .detail3 > div:first-child span:nth-child(2)").text(t.analyze2.year),e(".page3 .detail3 > div:nth-child(2) span").text(t.name+"第一次缴纳公积金"),e(".page3 .detail3 span:nth-child(4)").text(t.analyze2.month),e(".page3 .detail3 .diff-year").text(t.analyze2.diff_year),e(".page3 .detail4 span:nth-child(2)").text(t.analyze2.city),t.analyze3.age?(e(".page4 .detail5 .age").text(t.analyze3.age),e(".page4 .detail5 .age").after(e("<span>后</span>"))):e(".page4 .detail5 .age").text("社会人"),e(".page4 .detail5 .name").text(t.name),e(".page4 .detail5 .gender").text("的"+t.analyze3.gender+"性"),e(".page4 .detail6 .gender").text("的"+t.analyze3.gender+"性"),e(".page4 .detail5 .female-ranking").text(t.analyze3.ranking_p_female+"%"),e(".page4 .detail6 .male-ranking").text(t.analyze3.ranking_p_male+"%"),e(".page5 .detail10 .company_count").text(t.analyze4.company_count),e(".page5 .detail10 .name").text("争着为"+t.name+"缴公积金"),e(".page6 .detail7-1 .name").text(t.name+"的公积金可以"),a.getPage6Text(t.analyze5.text),e(".page7 .detail8 div:first-child span").text(t.name+"的公积金可以拥有"),a.getNumberImage(t.analyze6.loanable_amount,"page7")},getPage6Text:function(t){var a=t.split("|");console.log(a);for(var n=0;len=a.length,len>n;n++)e(".page6 .text"+(n+1)).text(a[n].match(/\S+/))},getAnalysisData:function(){var t=this;e.ajax({type:"POST",dataType:"JSON",url:"test.php",success:function(e){r=e,e.success&&(console.log("后台数据：",e),e.ret.show?(t.createPortrait(e.ret),t.getAnalyzingData(e.ret)):window.location.href=e.url)}})},fullpage:function(){var t=this,a=document.getElementsByClassName("wp-inner")[0].fullpage({start:0,beforeChange:function(e){var a="page"+(e.next+1);console.log("now",a),t.changeState(a)},afterChange:function(a){var n=null;clearTimeout(n),t.fullPageObj.stop();var r="page"+(a.cur+1);"page1"==r&&(t.PageBuryRequest(r),e(".page1").on("click",".img-btn",function(){e.ajax({type:"POST",dataType:"JSON",url:"test.php",success:function(a){a.success&&(console.log("后台数据：",a),0==a.login?(i.show("想解析公积金，先登录APP啦！"),o&&o.action("login")):a.ret.show?(l.show(),e(".tp-analyzing").fadeIn(),e(".sweat").fadeIn(),console.log(t.fullPageObj),setTimeout(function(){l.hide(),e(".tp-analyzing").fadeOut(),e(".sweat").fadeOut(),t.fullPageObj.moveTo(1,!0)},2e3)):(i.show("查询公积金后，才能解析你的公积金秘密噢~"),setTimeout(function(){window.location.href=a.ret.url},1500)))}})}),t.respondState(r)),"page2"==r&&(t.PageBuryRequest(r),e(".page2").on("click",".next",function(){t.fullPageObj.moveTo(2,!0)}),t.respondState(r,0,!0,function(){console.log("返回第一页")})),"page3"==r&&(t.PageBuryRequest(r),e(".page3").on("click",".next",function(){t.fullPageObj.moveTo(3,!0)}),t.respondState(r,1,!0,function(){console.log("返回第二页")})),"page4"==r&&(t.PageBuryRequest(r),e(".page4").on("click",".next",function(){t.fullPageObj.moveTo(4,!0)}),t.respondState(r,2,!0,function(){console.log("返回第三页")})),"page5"==r&&(t.PageBuryRequest(r),e(".page5").on("click",".next",function(){t.fullPageObj.moveTo(5,!0)}),t.respondState(r,3,!0,function(){console.log("返回第四页")})),"page6"==r&&(t.PageBuryRequest(r),e(".page6").on("click",".next",function(){t.fullPageObj.moveTo(6,!0)}),t.respondState(r,4,!0,function(){console.log("返回第五页")})),"page7"==r&&(t.PageBuryRequest(r),e(".page7").on("click",".next",function(){t.fullPageObj.moveTo(7,!0)}),t.respondState(r,5,!0,function(){console.log("返回第六页")})),"page8"==r&&(t.PageBuryRequest(r),e(".page8").on("click",".img-btn",function(){t.share()}),t.respondState(r,6,!0,function(){console.log("返回第七页")}))}});return a},changeState:function(e){window.history.pushState&&window.history.pushState({title:e},e,"index.php#page="+e)},respondState:function(e,t,a,i){var l=this,r=n.Tool.userAgent();o&&r.isGjj?o.onBack(function(){return"page1"==e?!1:(a?l.fullPageObj.moveTo(t,!0):l.fullPageObj.moveTo(t),i&&i(),!0)}):window.onpopstate=function(){a?(console.log(l.fullPageObj),l.fullPageObj.moveTo(t,!0)):l.fullPageObj.moveTo(t),i&&i()}},share:function(e){var t=navigator.userAgent,a={mobile:!!t.match(/AppleWebKit.*Mobile.*/),isAndroid:t.indexOf("Android")>-1||t.indexOf("Linux")>-1||t.indexOf("android")>-1,isiOS:/[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),webApp:-1==t.indexOf("Safari"),weixin:t.indexOf("MicroMessenger")>-1,isGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(t)||/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),isAndroidGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(t),isiOSGjj:/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),isGjjFdjsq:/^android\/[\w\W]+client\/[\w\W]+category\/51fdjsq$/.test(t)},n=window.location.host;return a.isGjj&&o&&o.action("ShareTimeline",{title:"转盘抽奖",desc:"查公积金送积分",thumb:"https://r.51gjj.com/act/release/img/20170721_share.png",link:"https://"+n+"/hd/20160714/invite_out_v2.php?c="+e}),this}};g.start()});