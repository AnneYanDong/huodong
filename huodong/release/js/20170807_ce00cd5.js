require.config(requireConfig),require(["jquery","fastClick","FullPage","ct","bridge","juicer"],function(e,a,t,n,o){var i=(e(".mask"),Object.create(n.Prompt));i.create().build();var l=Object.create(n.Mask);l.create().build();n.Tool.local(),n.Tool.userAgent().isGjj?1:0;n.Tool.buryPoint_v2(0);var r=null,g={start:function(){var e=this;a.attach(document.body),n.Tool.setFont(),n.Tool.handleBottomStatusBar(),window.addEventListener("resize",n.Tool.debounce(n.Tool.setFont)),window.addEventListener("resize",n.Tool.debounce(n.Tool.handleBottomStatusBar));var t=Object.create(n.PreLodingUi);t.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),n.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var a=null;clearTimeout(a),a=setTimeout(function(){t.hide(),e.init()},500)}})},init:function(){console.log("解析你的公积金活动");var a=this;a.setNavAttr(),e(".wp").removeClass("hide"),a.fullPageObj=a.fullpage(),a.getAnalysisData()},setNavAttr:function(){o&&o.action("setNavigationColor",{backgroundColor:"#e33d3b",textColor:"#fff",iconType:"1"})},PageBuryRequest:function(a){console.log("埋点：",a);var t=a.substring(4);e.ajax({type:"POST",dataType:"JSON",url:"/act/request/activity",data:JSON.stringify({source:n.Tool.userAgent().isGjj?1:0,tag:"20170807_"+t+"_0_0_进入页面"+a}),success:function(e){e.success}})},createPortrait:function(a){var t=new Image,n=["http://r.51gjj.com/act/release/img/20170807_page2_portrait4.png","http://r.51gjj.com/act/release/img/20170807_page2_portrait5.png","http://r.51gjj.com/act/release/img/20170807_page2_portrait6.png"],o=["http://r.51gjj.com/act/release/img/20170807_page2_portrait1.png","http://r.51gjj.com/act/release/img/20170807_page2_portrait2.png","http://r.51gjj.com/act/release/img/20170807_page2_portrait3.png"];t.src="男"==a.analyze1.gender?n[Math.floor(Math.random()*n.length)]:o[Math.floor(Math.random()*o.length)],e(".portrait").append(t)},getNumberImage:function(a,t){for(var n=a.toString(),o=0;len1=n.length,len1>o;o++){var i=new Image,l=e("<div class='img-wrap"+o+"'></div>");l.append(i);for(var r=0;o>=r;r++)i.src="http://r.51gjj.com/act/release/img/"+n[r]+"_new.png",e("."+t+" .div-container").append(l)}e(".div-container div img").css("page2"==t||"page7"==t?{width:".42rem",height:".68rem",padding:".02rem"}:{width:".27rem",height:".42rem"}),"page2"==t&&e(".page2 .div-container").append("<span class='ming'>名</span>"),"page7"==t&&e(".page7 .div-container").append("<span class='ming'>元</span>")},showData:function(a){for(var t={ele:[".page2 .detail1 span:first-child",".page2 .gjj_number div:first-child span",".page2 .detail2 span:nth-child(2)",".page2 .detail2 span:nth-child(3)",".page3 .detail3 > div:first-child span:nth-child(2)",".page3 .detail3 > div:nth-child(2) span",".page3 .detail3 span:nth-child(4)",".page3 .detail3 .diff-year",".page3 .detail4 span:nth-child(2)",".page4 .detail5 .name",".page4 .detail5 .gender",".page4 .detail6 .gender",".page4 .detail5 .female-ranking",".page4 .detail6 .male-ranking",".page5 .detail10 .company_count",".page5 .detail10 .name",".page6 .detail7-1 .name",".page7 .detail8 div:first-child span",".page4 .detail5 .age"],data:[a.name+"的公积金在"+a.analyze1.city+"市排名为",a.analyze1.city+"缴纳公积金人口基数",a.analyze1.ranking_p+"%","的"+a.analyze1.city+"人",a.analyze2.year,a.name+"第一次缴纳公积金",a.analyze2.month,a.analyze2.diff_year,a.analyze2.city,a.name,"的"+a.analyze3.gender+"性","的"+a.analyze3.gender+"性",a.analyze3.ranking_p_female+"%",a.analyze3.ranking_p_male+"%",a.analyze4.company_count,"争着为"+a.name+"缴公积金",a.name+"的公积金可以",a.name+"的公积金可以拥有",a.analyze3.age]},n=0;n<t.ele.length;n++)e(t.ele[n]).text(t.data[n]);null==a.analyze3.age||0==a.analyze3.age?e(".page4 .detail5 .age").text("社会人"):(e(t.ele[".page4 .detail5 .age"]).text(t.data[a.analyze3.age]),e(".page4 .detail5 .age").after(e("<span>后</span>")))},getAnalyzingData:function(e){var a=this;a.showData(e),a.getNumberImage(e.analyze1.ranking,"page2"),a.getPage6Text(e.analyze5.text),a.getNumberImage(e.analyze6.loanable_amount,"page7")},getPage6Text:function(a){var t=a.split("|");console.log(t);for(var n=0;len=t.length,len>n;n++)e(".page6 .text"+(n+1)).text(t[n].match(/\S+/))},getQueryStringArgs:function(){for(var e=location.search.length>0?location.search.substring(1):0,a=e.length>0?e.split("&"):[],t=null,n=null,o=null,i=a.length,l={},r=0;i>r;r++)t=a[r].split("="),n=decodeURIComponent(t[0]),o=decodeURIComponent(t[1]),n.length&&(l[n]=o);return l},getAnalysisData:function(){var a=this,t=a.getQueryStringArgs(),n=t.unionid;e.ajax({type:"POST",dataType:"JSON",data:stringify({unionid:n}),url:"test.php",success:function(e){r=e,e.success&&(console.log("后台数据：",e),e.ret.show?(a.createPortrait(e.ret),a.getAnalyzingData(e.ret)):window.location.href=e.url)}})},fullpage:function(){var a=this,t=document.getElementsByClassName("wp-inner")[0].fullpage({start:0,beforeChange:function(e){var t="page"+(e.next+1);console.log("now",t),a.changeState(t)},afterChange:function(t){var n=null;clearTimeout(n),a.fullPageObj.stop();var r="page"+(t.cur+1);"page1"==r&&(a.PageBuryRequest(r),e(".page1").on("click",".img-btn",function(){e.ajax({type:"POST",dataType:"JSON",url:"test.php",success:function(t){t.success&&(console.log("后台数据：",t),0==t.login?(i.show("想解析公积金，先登录APP啦！"),o&&o.action("login")):t.ret.show?(l.show(),e(".tp-analyzing").fadeIn(),e(".sweat").fadeIn(),console.log(a.fullPageObj),setTimeout(function(){l.hide(),e(".tp-analyzing").fadeOut(),e(".sweat").fadeOut(),a.fullPageObj.moveTo(1,!0)},2e3)):(i.show("查询公积金后，才能解析你的公积金秘密噢~"),setTimeout(function(){window.location.href=t.ret.url},1500)))}})}),a.respondState(r)),"page2"==r&&(a.PageBuryRequest(r),e(".page2").on("click",".next",function(){a.fullPageObj.moveTo(2,!0)}),a.respondState(r,0,!0,function(){console.log("返回第一页")})),"page3"==r&&(a.PageBuryRequest(r),e(".page3").on("click",".next",function(){a.fullPageObj.moveTo(3,!0)}),a.respondState(r,1,!0,function(){console.log("返回第二页")})),"page4"==r&&(a.PageBuryRequest(r),e(".page4").on("click",".next",function(){a.fullPageObj.moveTo(4,!0)}),a.respondState(r,2,!0,function(){console.log("返回第三页")})),"page5"==r&&(a.PageBuryRequest(r),e(".page5").on("click",".next",function(){a.fullPageObj.moveTo(5,!0)}),a.respondState(r,3,!0,function(){console.log("返回第四页")})),"page6"==r&&(a.PageBuryRequest(r),e(".page6").on("click",".next",function(){a.fullPageObj.moveTo(6,!0)}),a.respondState(r,4,!0,function(){console.log("返回第五页")})),"page7"==r&&(a.PageBuryRequest(r),e(".page7").on("click",".next",function(){a.fullPageObj.moveTo(7,!0)}),a.respondState(r,5,!0,function(){console.log("返回第六页")})),"page8"==r&&(a.PageBuryRequest(r),e(".page8").on("click",".img-btn",function(){a.share()}),a.respondState(r,6,!0,function(){console.log("返回第七页")}))}});return t},changeState:function(e){window.history.pushState&&window.history.pushState({title:e},e,"index.php#page="+e)},respondState:function(e,a,t,i){var l=this,r=n.Tool.userAgent();o&&r.isGjj?o.onBack(function(){return"page1"==e?!1:(t?l.fullPageObj.moveTo(a,!0):l.fullPageObj.moveTo(a),i&&i(),!0)}):window.onpopstate=function(){t?(console.log(l.fullPageObj),l.fullPageObj.moveTo(a,!0)):l.fullPageObj.moveTo(a),i&&i()}},share:function(){var e=navigator.userAgent,a={mobile:!!e.match(/AppleWebKit.*Mobile.*/),isAndroid:e.indexOf("Android")>-1||e.indexOf("Linux")>-1||e.indexOf("android")>-1,isiOS:/[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,isGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(e)||/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),isAndroidGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(e),isiOSGjj:/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),isGjjFdjsq:/^android\/[\w\W]+client\/[\w\W]+category\/51fdjsq$/.test(e)},t=window.location.host;return a.isGjj&&o&&o.action("ShareTimeline",{title:"要不是和你铁，这份公积金档案也不会发给你！",desc:"点击查看我的公积金秘密。",thumb:"https://r.51gjj.com/act/release/img/20170721_share.png",link:"https://"+t+"/act/wechat/act_analyzes"}),this}};g.start()});