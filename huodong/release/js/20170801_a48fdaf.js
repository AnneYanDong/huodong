require.config(requireConfig),require(["jquery","fastClick","FullPage","ct","bridge","juicer"],function(e,a,n,t,o,l){var s=(e(".mask"),Object.create(t.Prompt));s.create().build();var i=Object.create(t.Mask);i.create().build();t.Tool.local();t.Tool.buryPoint();var r,c=[],g=[],u=[],d=null,p=[],m=null,h=[],f=null,v=[],b={iconName:[],start:function(){var e=this;a.attach(document.body),t.Tool.setFont(),t.Tool.handleBottomStatusBar(),window.addEventListener("resize",t.Tool.debounce(t.Tool.setFont)),window.addEventListener("resize",t.Tool.debounce(t.Tool.handleBottomStatusBar));var n=Object.create(t.PreLodingUi);n.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),t.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var a=null;clearTimeout(a),a=setTimeout(function(){n.hide(),e.init()},500)}})},init:function(){console.log("私人订制活动");var a=this;e(".wp").removeClass("hide"),a.fullPageObj=a.fullpage()},BuryRequest:function(a){console.log("页面埋点：",a);var n=a;e.ajax({type:"POST",dataType:"JSON",url:t.Tool.url("/app/request/activity"),data:JSON.stringify({place_cid:t.Tool.userAgent().isGjj?1:0,tag:"进入页面"+n+projectName}),success:function(e){e.success}})},fullpage:function(){var a=this,n=document.getElementsByClassName("wp-inner")[0].fullpage({start:0,beforeChange:function(e){var n="page"+(e.next+1);console.log("now",n),a.changeState(n)},afterChange:function(n){a.fullPageObj.stop();var t="page"+(n.cur+1);if("page1"==t&&(a.BuryRequest(t),e(".page1 li").removeClass("bounce-out"),e(".page1 li").unbind().on("click",function(){var n=e(this);n.attr("disabled","disabled"),g=n.data("loan-total"),u.length=0,u.push(g),console.log("loanTotal",u);var t=null;clearTimeout(t),t=setTimeout(function(){n.addClass("bounce-out"),clearTimeout(t),t=setTimeout(function(){a.fullPageObj.moveTo(1,!0),n.removeAttr("disabled")},800)},200)}),a.respondState(t)),"page2"==t&&(a.BuryRequest(t),e(".page1 li").removeClass("bounce-out").removeAttr("disabled"),e(".page2 li").unbind().on("click",function(){var n=e(this);n.attr("disabled","disabled");var t=null;clearTimeout(t),t=setTimeout(function(){n.addClass("bounce-out"),clearTimeout(t),t=setTimeout(function(){a.fullPageObj.moveTo(2,!0)},800)},200),d=n.data("loan-time"),p.length=0,p.push(d),console.log("点击时time:",p)}),a.respondState(t,0,!0,function(){console.log("返回第一页"),e(".page1 li").removeClass("bounce-out"),u.length=0,g=null,console.log("返回时loanTotal:",u)})),"page3"==t&&(a.BuryRequest(t),e(".page3 li").unbind().on("click",function(){var n=e(this);n.attr("disabled","disabled");var t=null;clearTimeout(t),t=setTimeout(function(){n.addClass("bounce-out"),clearTimeout(t),t=setTimeout(function(){a.fullPageObj.moveTo(3,!0)},800)},200),m=n.data("loan-release"),h.length=0,h.push(m)}),a.respondState(t,1,!0,function(){console.log("返回第二页"),e(".page2 li").removeClass("bounce-out").removeAttr("disabled"),p.length=0,d=null})),"page4"==t&&(a.BuryRequest(t),e(".page4 .circle div").unbind().on("click",function(){var n=e(this);n.attr("disabled","disabled"),f=n.data("loan-focus"),v.length=0,v.push(f),c.length=0,c.push(u,p,h,v);var o=null;clearTimeout(o),o=setTimeout(function(){n.addClass("circle-rotating"),clearTimeout(o),o=setTimeout(function(){a.getAnalysisData(t)},800)},200)}),a.respondState(t,2,!0,function(){console.log("返回第三页"),e(".page3 li").removeClass("bounce-out").removeAttr("disabled"),e(".page4 .analyzing-process div").removeClass("analyzing").addClass("hide"),h.length=0,m=null})),"page5"==t){a.BuryRequest(t);var o=r;e(".page5 .loan-match span").addClass("progress"),e(".page5 .final-loan").unbind().on("click",".final-loan,.finger-box",function(){e(".page5 .final-loan").attr("bp",o.name),e(".page5 .final-loan").attr("title",o.name),e(this).attr("disabled","disabled"),e(".page5 .finger").addClass("hide").removeClass("move"),e(".page5 .fingerprint").removeClass("hide"),e(".page5 .finger-scan").removeClass("hide").addClass("finger-scaning"),setTimeout(function(){console.log("dataObj",o),window.location.href=o.url,e(".page5 .fingerprint").addClass("hide"),e(".page5 .finger-scan").addClass("hide").removeClass("finger-scaning")},1e3)}),e(".page5 .content").unbind().on("click",".test-btn",function(){e(".page5 .content .test-btn").attr("disabled","disabled"),timer=setTimeout(function(){a.fullPageObj.moveTo(0,!0),e(".page5 .content .test-btn").removeAttr("disabled"),u.length=0,g=null,p.length=0,d=null,h.length=0,m=null,v.length=0,f=null,c.length=0,e(".page1 li").removeClass("bounce-out"),e(".page2 li").removeClass("bounce-out"),e(".page3 li").removeClass("bounce-out"),e(".page4 .circle div").removeClass("circle-rotating"),e(".page4 .customization-tp").hide(),e(".page5 .loan-match span").removeClass("progress"),e(".page5 .icon-box").html(""),e(".page5 .loan-name").html(""),e(".page5 .loan-match").html(""),e(".page5 .loan-amount").html(""),e(".page5 .day-rate").html(""),e(".page5 .release-time").html(""),e(".page5 .finger").removeClass("hide").addClass("move"),e(".page5 .fingerprint").addClass("hide"),e(".page5 .finger-scan").addClass("hide").removeClass("finger-scaning")},500)}),a.respondState(t,3,!0,function(){console.log("返回第四页"),e(".page4 .circle div").removeClass("circle-rotating").removeAttr("disabled"),e(".page5 .loan-match span").removeClass("progress"),e(".page5 .finger").removeClass("hide").addClass("move"),e(".page5 .fingerprint").addClass("hide"),e(".page5 .finger-scan").addClass("hide").removeClass("finger-scaning"),v.length=0,f=null,c.length=0,e(".page4 .customization-tp").hide(),e(".page4 .analyzing-process div").removeClass("analyzing").addClass("hide")})}}});return n},showAnalyzeProcess:function(a){var n=this;if(e(".page4 .analyzing-process div.span"+a).removeClass("hide").addClass("analyzing"),console.log("counter:",a),5>a){var t=null;clearTimeout(t),t=setTimeout(function(){n.showAnalyzeProcess(a+1)},500)}},getAnalysisData:function(a){var n=this;console.log("请求传递的数据：",c),e.ajax({type:"POST",dataType:"JSON",data:JSON.stringify(c),url:"test.php",success:function(t){t.success?(r=t.ret.data,console.log("data->",r),1==r.sex&&(e(".page4 .customization-tp").fadeIn(),n.showAnalyzeProcess(0),n.showIcon(),n.getLoanInfo(),setTimeout(function(){"page4"==a&&(n.fullPageObj.moveTo(4,!0),e(".page4 .customization-tp").fadeOut(),e(".page4 .analyzing-process div").removeClass("analyzing").addClass("hide"))},2e3)),2==r.sex&&(e(".page4 .customization-tp .male").hide(),e(".page4 .customization-tp").fadeIn(),e(".page4 .customization-tp .female").show(),n.showAnalyzeProcess(0),n.showIcon(),n.getLoanInfo(),setTimeout(function(){n.fullPageObj.moveTo(4,!0),e(".page4 .analyzing-process div").removeClass("analyzing").addClass("hide")},5e3))):s.show(t.msg||"出错了请重试")}})},changeState:function(e){window.history.pushState&&window.history.pushState({title:e},e,"index.php#page="+e)},respondState:function(e,a,n,l){var s=this,i=t.Tool.userAgent();o&&i.isGjj?o.onBack(function(){return"page1"==e?!1:(n?s.fullPageObj.moveTo(a,!0):s.fullPageObj.moveTo(a),l&&l(),!0)}):window.onpopstate=function(){n?(console.log(s.fullPageObj),s.fullPageObj.moveTo(a,!0)):s.fullPageObj.moveTo(a),l&&l()}},showIcon:function(){var a=r.show.length;console.log("len->",a),e(".page5 .icon-box").html("");for(var n=0;a>n;n++){var t=document.createElement("li"),o=document.createElement("img"),l=document.createElement("span");t.append(o),t.append(l),e(".icon-box").append(t),l.innerHTML=r.show[n],"小额度"==l.innerHTML&&(o.src="http://r.51gjj.com/act/release/img/20170801_xed.png"),"放款快"==l.innerHTML&&(o.src="http://r.51gjj.com/act/release/img/20170801_fkk.png"),"分期长"==l.innerHTML&&(o.src="http://r.51gjj.com/act/release/img/20170801_fqc.png"),"急用钱"==l.innerHTML&&(o.src="http://r.51gjj.com/act/release/img/20170801_jyq.png"),"精明派"==l.innerHTML&&(o.src="http://r.51gjj.com/act/release/img/20170801_jmp.png"),"大额度"==l.innerHTML&&(o.src="http://r.51gjj.com/act/release/img/20170801_ded.png")}},getLoanInfo:function(){var a=e("#tpl-loan-name").html(),n=l(a,r);e(".page5 .loan-name").html(""),e(".page5 .loan-name").append(n);var t=e("#tpl-loan-match").html(),o=l(t,r);e(".page5 .loan-match").html(""),e(".page5 .loan-match").append(o);var s=e("#tpl-loan-amount").html(),i=l(s,r);e(".page5 .loan-amount").html(""),e(".page5 .loan-amount").append(i);var c=e("#tpl-day-rate").html(),g=l(c,r);e(".page5 .day-rate").html(""),e(".page5 .day-rate").append(g);var u=e("#tpl-release-time").html(),d=l(u,r);e(".page5 .release-time").html(""),e(".page5 .release-time").append(d)}};b.start()});