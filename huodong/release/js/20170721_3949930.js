require.config(requireConfig),require(["jquery","fastClick","lucky-card","ct","bridge","juicer","marquee"],function(e,t,i,o,n){var a=(e(".mask"),Object.create(o.Prompt));a.create().build();var c=Object.create(o.Mask);c.create().build();o.Tool.local();o.Tool.buryPoint();var s=((new Date).getDay(),null),r=0,l=0,u={start:function(){var i=this;t.attach(document.body),o.Tool.setFont(),window.addEventListener("resize",o.Tool.debounce(o.Tool.setFont));var n=Object.create(o.PreLodingUi);n.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),s=o.Tool.userAgent(),o.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var e=null;clearTimeout(e),e=setTimeout(function(){n.hide(),i.init()},500)}}),e.ajax({type:"POST",dataType:"JSON",url:o.Tool.url("/app/request/activity"),data:JSON.stringify({place_cid:o.Tool.userAgent().isGjj?1:0,tag:"进入页面"+projectName}),success:function(e){1==e.success}})},init:function(){var t=this;e(".out-wrap").removeClass("hide"),t.getChance(),t.raffle(),t.shareToFriend(),console.log("送积分活动！")},getChance:function(){e.ajax({type:"POST",dataType:"JSON",url:"/act/act170721/get_status",success:function(e){if(console.log(e),e.success){var e=e.ret;e.is_weChat||e.is_qq?setTimeout(function(){window.location.href=e.url},1500):e.login?e.chance<=0&&a.show("机会用尽啦，不要太贪心哦，邀请好友一起玩"):(a.show("亲爱滴，登陆后才能玩耍哦，快去登陆吧~"),n&&n.action("login"))}}})},raffle:function(){var t=null;clearTimeout(t),e(".wp-inner .content").on("click",".turntable,.arrow",function(){e.ajax({type:"POST",dataType:"JSON",url:"/act/act170721/get_prize",success:function(t){if(console.log(t),t.success){var t=t.ret;t.is_qq||t.is_weChat?setTimeout(function(){window.location.href=t.url},1500):0==t.login?(a.show("亲爱滴，登陆后才能玩耍哦，快去登陆吧~"),n&&n.action("login")):(console.log("机会次数",t.chance),t.chance<=0?a.show("机会用尽啦，不要太贪心哦，邀请好友一起玩"):(console.log("angle->",t.angle),r=t.angle+720,l+=3,"none"==e(".turntable").css("transform")?e(".turntable").css({transform:"rotate("+r+"deg)",transition:"transform 3s ease"}):e(".turntable").css("transform","rotate("+(360*l+t.angle)+"deg)"),setTimeout(function(){a.show("人品爆发，中奖啦！恭喜抽中"+t.gift_name+"!")},3e3)))}else a.show(t.msg||"哎呀，出错了呢")}})})},shareToFriend:function(){var t=this;e(".wp-inner .content").on("click",".btn2",function(){e.ajax({type:"POST",dataType:"JSON",url:"/act/act170721/get_prize",success:function(e){console.log(e);var e=e.ret;e.is_qq||e.is_weChat?setTimeout(function(){window.location.href=e.url},1500):0==e.login?(a.show("亲爱滴，登陆后才能玩耍哦，快去登陆吧~"),n&&n.action("login")):(console.log("分享功能"),t.share(e.invitation_code))}})})},share:function(e){var t=navigator.userAgent,i={mobile:!!t.match(/AppleWebKit.*Mobile.*/),isAndroid:t.indexOf("Android")>-1||t.indexOf("Linux")>-1||t.indexOf("android")>-1,isiOS:/[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),webApp:-1==t.indexOf("Safari"),weixin:t.indexOf("MicroMessenger")>-1,isGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(t)||/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),isAndroidGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(t),isiOSGjj:/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),isGjjFdjsq:/^android\/[\w\W]+client\/[\w\W]+category\/51fdjsq$/.test(t)},o=window.location.host;return i.isGjj&&n&&n.action("ShareTimeline",{title:"转盘抽奖",desc:"查公积金送积分",thumb:"https://r.51gjj.com/act/release/img/20170721_share.png",link:"https://"+o+"/hd/20160714/invite_out_v2.php?c="+e}),this}};u.start()});