require.config(requireConfig),require(["jquery","fastClick","FullPage","ct","bridge","juicer","qrcode"],function(e,o,t,n){function i(e){var o=e.split("?"),t={};if(o[1]){o[1]=o[1].split("#")[0];for(var n=o[1].split("&"),i=0;i<n.length;++i){var c=n[i].split("="),a=decodeURIComponent(c[0]),r=decodeURIComponent(c[1]);t[a]=r}}return t}var c=(e(".mask"),Object.create(n.Prompt));c.create().build();var a=Object.create(n.Mask);a.create().build();n.Tool.local(),window.location.host;n.Tool.buryPoint_v2(n.Tool.userAgent().isGjj?1:0);var r={start:function(){var t=this;o.attach(document.body),n.Tool.setFont(),window.addEventListener("resize",n.Tool.debounce(n.Tool.setFont));var i=Object.create(n.PreLodingUi);i.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),n.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var e=null;clearTimeout(e),e=setTimeout(function(){i.hide(),t.init()},500)}}),e.ajax({type:"POST",dataType:"JSON",url:n.Tool.url("/act/request/activity"),data:JSON.stringify({source:n.Tool.userAgent().isGjj?1:0,tag:"20170908_1_0_0_理财被邀请人页面"}),success:function(e){1==e.success}})},init:function(){var o=this;e(".wp").removeClass("hide"),o.openRule(),o.closeRule(),o.getCode(),o.searchClick(),o.render()},render:function(){var o=i(window.location.href).phone;e(".tips-phone p span").text(o)},openRule:function(){e(".btn-rule").on("click","span",function(){a.show(),e(".rule").fadeIn()})},closeRule:function(){e("body").on("click",".btn-close",function(){e(".rule").fadeOut(function(){a.hide()})})},getCode:function(){_this=this,e(".JS-get-code").on("click",function(){if(_this.checkPhone(e(".JS-phone"))){var o=e(".JS-phone").val();e.ajax({url:"/act/market/get_verification_code",type:"POST",dataType:"JSON",data:JSON.stringify({phone:o}),success:function(o){o.success===!0?(c.show("短信验证码已发送，请注意查收"),_this.timeDown(e(".JS-get-code"),60)):(e(".JS-get-code").removeClass("timing"),c.show(o.msg||"出错了，请重试"))},error:function(o){e(".JS-get-code").removeClass("timing"),c.show("发生错误"+o+"，请重试")}})}})},searchClick:function(){var o=this,t="/act/market/get_invitation_register";e(".btn-submit").on("click",function(){if(o.checkPhone(e(".JS-phone"))&&o.checkCode(e(".JS-code"))){var n=e(".JS-phone").val(),i=e(".JS-code").val();e.ajax({type:"POST",url:t,dataType:"JSON",data:JSON.stringify({phone:n,code:i}),success:function(e){e.success===!0?window.location.href="./download.php":c.show(512==e.code?"您已经注册过，不能太贪心哦～":e.msg||"出错了，请重试")},error:function(e){c.show("发生错误"+e+"，请重试")}})}})},checkPhone:function(e){var o=/^1\d{10}$/,t=e.val();return o.test(t)?!0:void c.show("请输入正确的手机号！")},checkCode:function(e){var o=e.val();return""!=o?!0:void c.show("验证码错误或未输入")},timeDown:function(o,t){if(o.hasClass("timing"))return!1;clearInterval(n),o.text(t+"s"),o.addClass("timing"),o.parent().append(e("<div class='code-mark'></div>"));var t=t-1,n=setInterval(function(){o.text(t+"s"),t--,0>t&&(clearInterval(n),e(".code-mark").remove(),o.removeClass("timing"),o.text("获取验证码"))},1e3)}};r.start()});