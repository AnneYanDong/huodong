require.config(requireConfig),require(["jquery","fastClick","lucky-card","ct","bridge","juicer","marquee"],function(e,t,i,n,o){var a=(e(".mask"),Object.create(n.Prompt));a.create().build();var c=Object.create(n.Mask);c.create().build();n.Tool.local();n.Tool.buryPoint();var r=((new Date).getDay(),null),s={start:function(){var i=this;t.attach(document.body),n.Tool.setFont(),window.addEventListener("resize",n.Tool.debounce(n.Tool.setFont));var c=Object.create(n.PreLodingUi);c.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),r=n.Tool.userAgent(),n.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var e=null;clearTimeout(e),e=setTimeout(function(){c.hide(),i.init()},500)}}),e.ajax({type:"POST",dataType:"JSON",url:n.Tool.url("/app/request/activity"),data:JSON.stringify({place_cid:n.Tool.userAgent().isGjj?1:0,tag:"进入页面"+projectName}),success:function(e){1==e.success}}),e.ajax({type:"POST",dataType:"JSON",url:"/act/act170721/get_status",success:function(e){if(e.success){var e=e.ret;e.is_weChat||e.is_qq?window.location.href=e.url:e.login?e.chance<=0&&a.show("机会用尽啦，不要太贪心哦，邀请好友一起玩"):(a.show("亲爱滴，登陆后才能玩耍哦，快去登陆吧~"),o&&o.action("login"))}}})},init:function(){var t=this;e(".out-wrap").removeClass("hide"),t.raffle(),t.shareToFriend(),console.log("送积分活动！")},raffle:function(){var t=this,i=null;clearTimeout(i),t.shareToFriend(),e(".wp-inner .content").on("click",".turntable,.arrow",function(){e.ajax({type:"POST",dataType:"JSON",url:"/act/act170721/get_prize",success:function(t){if(console.log(t),t.success){var t=t.ret;t.is_qq||t.is_weChat?window.location.href=t.url:t.login?(console.log("机会次数",t.chance),t.chance>0?(e(".turntable").addClass("turning"),i=setTimeout(function(){console.log("angle->",t.angle),e(".turntable").css("transform","rotate("+t.angle+"deg)"),i=setTimeout(function(){a.show("人品爆发，中奖啦！恭喜抽中"+t.gift_name+"!"),e(".turntable").removeClass("turning")},500)},2e3)):a.show("机会用尽啦，不要太贪心哦，邀请好友一起玩")):(a.show("亲爱滴，登陆后才能玩耍哦，快去登陆吧~"),o&&o.action("login"))}else a.show(t.msg||"哎呀，出错了呢")}})})},shareToFriend:function(){var t=this;e(".wp-inner .content").on("click",".btn2",function(){t.share(),e.ajax({type:"POST",dataType:"JSON",url:"/act/act170721/get_prize",success:function(e){console.log(e)}})})},share:function(){var e=navigator.userAgent,t={mobile:!!e.match(/AppleWebKit.*Mobile.*/),isAndroid:e.indexOf("Android")>-1||e.indexOf("Linux")>-1||e.indexOf("android")>-1,isiOS:/[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,isGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(e)||/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),isAndroidGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(e),isiOSGjj:/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),isGjjFdjsq:/^android\/[\w\W]+client\/[\w\W]+category\/51fdjsq$/.test(e)},i=window.location.host;return t.isGjj&&o&&o.action("quickIcon",{thumb:"https://r.51gjj.com/image/static/ico_title_share_dark.png",onclick:function(){o.action("ShareTimeline",{title:"转盘抽奖",desc:"查公积金送积分",thumb:"https://r.51gjj.com/act/release/img/20170721_share.png",link:"http://"+i+"/act/home/huodong/20170721/"})}}),this}};s.start()});