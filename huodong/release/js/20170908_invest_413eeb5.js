require.config(requireConfig),require(["jquery","fastClick","FullPage","ct","bridge","juicer","qrcode"],function(e,o,t,n){var i=(e(".mask"),Object.create(n.Prompt));i.create().build();var c=Object.create(n.Mask);c.create().build();n.Tool.local(),window.location.host;n.Tool.buryPoint_v2(0);var a={start:function(){var t=this;o.attach(document.body),n.Tool.setFont(),window.addEventListener("resize",n.Tool.debounce(n.Tool.setFont));var i=Object.create(n.PreLodingUi);i.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),n.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var e=null;clearTimeout(e),e=setTimeout(function(){i.hide(),t.init()},500)}}),e.ajax({type:"POST",dataType:"JSON",url:n.Tool.url("/act/request/activity"),data:JSON.stringify({source:n.Tool.userAgent().isGjj?1:0,tag:"20170901_1_0_0_进入页面"}),success:function(e){1==e.success}})},init:function(){var o=this;e(".wp").removeClass("hide"),o.openRule(),o.closeRule(),o.getCode(),o.searchClick()},openRule:function(){e(".btn-rule").on("click","span",function(){c.show(),e(".rule").fadeIn()})},closeRule:function(){e("body").on("click",".btn-close",function(){e(".rule").fadeOut(function(){c.hide()})})},getCode:function(){_this=this,e(".JS-get-code").on("click",function(){if(_this.checkPhone(e(".JS-phone"))){var o=e(".JS-phone").val();e.ajax({url:"/app",type:"POST",dataType:"JSON",data:JSON.stringify({phone:o,place_name:place_name}),success:function(o){o.success===!0?(i.show("短信验证码已发送，请注意查收"),_this.timeDown(e(".JS-get-code"),60)):512==o.code?(i.show("您已注册，直接参与吧"),skipTimer=setTimeout(function(){e(".section").addClass("slideTop")},1500)):(e(".JS-get-code").removeClass("timing"),i.show(o.msg||"出错了，请重试"))},error:function(o){e(".JS-get-code").removeClass("timing"),i.show("发生错误"+o+"，请重试")}})}})},searchClick:function(){var o=this,t=null,n="https://b.jianbing.com/act/market/get_register";e(".btn-submit").on("click",function(){if(o.checkPhone(e(".JS-phone"))&&o.checkCode(e(".JS-code"))){var c=e(".JS-phone").val(),a=e(".JS-code").val();e.ajax({type:"POST",url:n,dataType:"JSON",data:JSON.stringify({phone:c,code:a,place:place_name}),success:function(o){o.success===!0||(512==o.code?(i.show("您已注册，直接参与吧"),clearTimeout(t),t=setTimeout(function(){e(".section").addClass("slideTop")},1500)):i.show(o.msg||"出错了，请重试"))},error:function(e){i.show("发生错误"+e+"，请重试")}})}})},checkPhone:function(e){var o=/^1\d{10}$/,t=e.val();return o.test(t)?!0:void i.show("请输入正确的手机号！")},checkCode:function(e){var o=e.val();return""!=o?!0:void i.show("验证码错误或未输入")},timeDown:function(o,t){if(o.hasClass("timing"))return!1;clearInterval(n),o.text(t+"s"),o.addClass("timing"),o.parent().append(e("<div class='code-mark'></div>"));var t=t-1,n=setInterval(function(){o.text(t+"s"),t--,0>t&&(clearInterval(n),e(".code-mark").remove(),o.removeClass("timing"),o.text("获取验证码"))},1e3)}};a.start()});