!function(t,e){"use strict";function n(t){this.inited=!1,this.startY=0,this.distance=0,this.timer=null,this.nextPageTop=0,this.prevPageTop=0,this.index=0,this.curPagePos=0,this.nextPagePos=0,this.pageHeight=0,this.prevPagePos=0,this.opt={startPage:1,range:70,duration:200,loop:!1,elastic:!0,translate3d:!0,callback:{}},this.init(t)}n.prototype.motion=function(t){return this.opt.translate3d?"translate3d(0,"+t+"px,0)":"translate(0,"+t+"px)"},n.prototype.showSec=function(e,n){t(".current").length&&t(".current,.next,.prev").css({"-webkit-transition":null,"-webkit-transform":null}).removeClass("current prev next");var o,i,s,r=t(".section").length;"next"==n?(o=e==r?1:e+1,i=o==r?this.opt.loop?1:0:o+1,s=e):"prev"==n?(o=1==e?r:e-1,i=e,s=1==o?this.opt.loop?r:0:o-1):(o=e,i=e==r?this.opt.loop?1:0:e+1,s=1==e?this.opt.loop?r:0:e-1);var a=t(".sec"+o),c=t(".sec"+i),p=t(".sec"+s);a.addClass("current"),this.pageHeight=t(".current").height(),c.addClass("next").css("-webkit-transform",this.motion(this.pageHeight)),p.addClass("prev").css("-webkit-transform",this.motion(-this.pageHeight)),a.addClass("ani").siblings(".section").removeClass("ani"),"function"==typeof this.opt.callback[o]&&this.opt.callback[o]()},n.prototype.touchStartHandler=function(e){var n=e.data.that;if(n.timer)return void e.preventDefault();n.index=t(".section").index(t(this))+1;var o=e.touches[0];n.distance=0,n.startY=o.clientY,n.curPagePos=t(this).offset().top,n.nextPagePos=t(".next").length&&t(".next").offset().top,n.prevPagePos=t(".prev").length&&t(".prev").offset().top,t(this).off("touchmove").on("touchmove",{that:n},n.touchMoveHandler),t(this).off("touchend").on("touchend",{that:n},n.touchEndHandler),e.preventDefault()},n.prototype.touchMoveHandler=function(e){var n=e.data.that;if(n.timer)return void e.preventDefault();var o=e.touches[0];return n.distance=o.clientY-n.startY,Math.abs(n.distance)<5?void e.preventDefault():!n.opt.elastic&&(1===n.index&&n.distance>0||n.index===t(".section").length&&n.distance<0)?void e.preventDefault():(n.curPageTop=n.curPagePos+n.distance,n.nextPageTop=n.nextPagePos+n.distance,n.prevPageTop=n.prevPagePos+n.distance,t(this).css("-webkit-transform",n.motion(n.curPageTop)),t(".next").css("-webkit-transform",n.motion(n.nextPageTop)),t(".prev").css("-webkit-transform",n.motion(n.prevPageTop)),void e.preventDefault())},n.prototype.touchEndHandler=function(e){var n=e.data.that;if(n.timer)return void e.preventDefault();if(t(".current,.next,.prev").css("-webkit-transition","-webkit-transform "+n.opt.duration+"ms linear"),n.distance<-n.opt.range&&t(".next").length||n.distance>n.opt.range&&t(".prev").length){var o=!!(n.distance<-n.opt.range);t(this).css("-webkit-transform",n.motion(o?-t(this).height():t(this).height())),t(o?".next":".prev").css("-webkit-transform",n.motion(0)),n.timer=setTimeout(function(){n.showSec(n.index,o?"next":"prev"),clearTimeout(n.timer),n.timer=null},n.opt.duration+5)}else t(this).css("-webkit-transform",n.motion(0)),t(".prev").css("-webkit-transform",n.motion(-n.pageHeight)),t(".next").css("-webkit-transform",n.motion(n.pageHeight)),n.timer=setTimeout(function(){t(".current,.next,.prev").css({"-webkit-transition":null}),clearTimeout(n.timer),n.timer=null},n.opt.duration+5);e.preventDefault()},n.prototype.go=function(t){this.init(t)},n.prototype.init=function(n){var o=this;"object"==typeof n?(t.extend(!0,o.opt,n),o.inited=!1):n&&(o.opt.startPage=n),o.inited?o.showSec(o.opt.startPage):(t(".section").off("touchstart").on("touchstart",{that:o},o.touchStartHandler),o.showSec(o.opt.startPage),o.inited=!0),t(e).on("onorientationchange"in e?"orientationchange":"resize",function(){o.go(o.index+1)})},n["case"]=function(t){return new n(t)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return n}):"undefined"!=typeof module&&module.exports?(module.exports=n["case"],module.exports.PageSlider=n):e.PageSlider=n}(window.Zepto,window,document);