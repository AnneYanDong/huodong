require.config(requireConfig),require(["jquery","fastClick","FullPage","ct","bridge","juicer","swiper"],function(e,t,a,i,n){var o=(e(".mask"),Object.create(i.Prompt));o.create().build();var r=Object.create(i.Mask);r.create().build();var s=(i.Tool.local(),i.Tool.userAgent().isGjj?1:0);i.Tool.buryPoint_v2(s),i.Tool.share(85,"jiexigjj831");var l={start:function(){var a=this;t.attach(document.body),i.Tool.setFont(),i.Tool.handleBottomStatusBar(),window.addEventListener("resize",i.Tool.debounce(i.Tool.setFont)),window.addEventListener("resize",i.Tool.debounce(i.Tool.handleBottomStatusBar));var n=Object.create(i.PreLodingUi);n.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),i.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var e=null;clearTimeout(e),e=setTimeout(function(){n.hide(),a.init()},500)}}),e.ajax({type:"POST",dataType:"JSON",url:"/act/request/activity",data:JSON.stringify({source:i.Tool.userAgent().isGjj?1:0,tag:"85_1_0_0_进入页面page1"}),success:function(e){e.success}})},init:function(){console.log("解析你的公积金活动");var t=this,a=t.getQueryStringArgs();unionid=a.unionid,shareid=a.shareid,t.share(),t.setNavAttr(),e(".wp").removeClass("hide"),t.mySwiper=t.useSwiper()},pagePaginationBuryRequest:function(){if(e(".swiper-pagination-bullet").hasClass("swiper-pagination-bullet-active")){var t=Number(e(".swiper-pagination-bullet-active").text())+1;e.ajax({type:"POST",dataType:"JSON",url:"/act/request/activity",data:JSON.stringify({source:i.Tool.userAgent().isGjj?1:0,tag:"85_1_0_0_进入页面page"+t}),success:function(e){e.success}})}},useSwiper:function(){var t=this,a=new Swiper(".swiper-container",{direction:"vertical",pagination:".swiper-pagination",onTouchEnd:function(a){var i=a.activeIndex;switch(t.changeState(i+2),t.swiperPageBuryRequest(i),t.pagePaginationBuryRequest(),i){case 0:e.ajax({type:"POST",dataType:"JSON",data:JSON.stringify({unionid:unionid,shareid:shareid}),url:"/act/analyze/get_analyze",success:function(a){a.success?a.ret.is_weChat?(e(".page8").on("click",".img-btn",function(){e(".page8 .share").addClass("bounce-out"),setTimeout(function(){e(".page8 .share").removeClass("bounce-out")},200)}),t.swiperHandleProcess(a)):0==a.ret.login?(o.show("想解析公积金，先登录APP啦！"),e(".page1").addClass("swiper-no-swiping"),e(".page2").remove(),e(".page3").remove(),e(".page4").remove(),e(".page5").remove(),e(".page6").remove(),e(".page7").remove(),e(".page8").remove(),e(".page9").remove(),n&&n.action("login")):t.swiperHandleProcess(a):o.show(a.msg||"出错了请重试")}})}}});return a},setNavAttr:function(){n&&n.action("setNavigationColor",{backgroundColor:"#e33d3b",textColor:"#fff",iconType:"1"})},swiperPageBuryRequest:function(t){console.log("第"+(t+1)+"个页面滑动的埋点记录：page",t+1),e.ajax({type:"POST",dataType:"JSON",url:"/act/request/activity",data:JSON.stringify({source:i.Tool.userAgent().isGjj?1:0,tag:"85_"+(t+1)+"_0_0_滑动页面"+(t+1)}),success:function(e){e.success}})},createPortrait:function(t){var a=new Image,i=["http://r.51gjj.com/act/release/img/20170807_page2_portrait4.png","http://r.51gjj.com/act/release/img/20170807_page2_portrait5.png","http://r.51gjj.com/act/release/img/20170807_page2_portrait6.png"],n=["http://r.51gjj.com/act/release/img/20170807_page2_portrait1.png","http://r.51gjj.com/act/release/img/20170807_page2_portrait2.png","http://r.51gjj.com/act/release/img/20170807_page2_portrait3.png"];"男"==t.analyze1.gender?(e(".portrait").empty(),a.src=i[Math.floor(Math.random()*i.length)]):(e(".portrait").empty(),a.src=n[Math.floor(Math.random()*n.length)]),e(".portrait").append(a)},getNumberImage:function(t,a){var i=t.toString();e("."+a+" .div-container").empty();for(var n=0;len1=i.length,len1>n;n++){var o=new Image,r=e("<div class='img-wrap"+n+"'></div>");r.append(o);for(var s=0;n>=s;s++)o.src="http://r.51gjj.com/act/release/img/"+i[s]+"_new.png",e("."+a+" .div-container").append(r)}e(".div-container div img").css({width:".42rem",height:".68rem",padding:".02rem"}),e(".page7 .div-container").append("<span class='ming'>元</span>")},showData:function(t){for(var a={ele:[".page2 .gjj_number div:first-child span",".page2 .detail2 span:nth-child(2)",".page2 .detail2 span:last-child",".page2 .dynamic-text span",".page3 .detail3 > div:first-child span:nth-child(2)",".page3 .detail3 > div:nth-child(2) span",".page3 .detail3 span:nth-child(4)",".page3 .detail3 .diff-year",".page3 .detail4 span:nth-child(2)",".page4 .detail5 .name",".page4 .detail5 .gender",".page4 .detail5 .female-ranking",".page4 .detail6 .male-ranking",".page5 .detail10 .company_count",".page5 .detail10 .name",".page6 .detail7-1 .name",".page7 .detail8 div:first-child span",".page4 .detail5 .age"],data:[t.analyze1.city+"缴纳公积金人口基数",t.analyze1.ranking_p+"%",t.analyze1.city+"人",t.analyze1.text,t.analyze2.year,t.name+"第一次缴纳公积金",t.analyze2.month,t.analyze2.diff_month,t.analyze2.city,t.name,"的"+t.analyze3.gender+"性",t.analyze3.ranking_p_female+"%",t.analyze3.ranking_p_male+"%",t.analyze4.company_count,"争着为"+t.name+"缴公积金",t.name+"的公积金可以",t.name+"的公积金可以拥有",t.analyze3.age]},n=0;n<a.ele.length;n++)e(a.ele[n]).html(""),e(a.ele[n]).text(a.data[n]);if(null==t.analyze3.age||0==t.analyze3.age)e(".page4 .detail5 .age").text(""),e(".page4 .detail5 .age").text("社会人");else{e(a.ele[".page4 .detail5 .age"]).text(a.data[t.analyze3.age]);var o=e(".page4 .hou");e(".page4 .detail5 .age").after(e("<span class='hou'>后</span>")),o.length>=1&&(e(".page4 .detail5 .age").siblings().not(":first").remove(),e(".page4 .detail5 .age").after(e("<span class='hou'>后</span>")))}e(".page4 .detail6 .gender").text("女"===t.analyze3.gender?"的男性":"的女性"),i.Tool.userAgent().isGjj===!0?(console.log("ct.Tool.userAgent().isGjj == ",i.Tool.userAgent().isGjj),e(".page2 .detail1 span:first-child").text("你的公积金")):(console.log("ct.Tool.userAgent().isGjj == ",i.Tool.userAgent().isGjj),e(".page2 .detail1 span:first-child").text(t.name+"的公积金"))},getAnalyzingData:function(e){var t=this;t.showData(e),t.getNumberImage(e.analyze6.loanable_amount,"page7"),t.getPage6Text(e.analyze5.text)},getPage6Text:function(t){for(var a=t.split("|"),i=0;len=a.length,len>i;i++)e(".page6 .text"+(i+1)).text(a[i].match(/\S+/))},getQueryStringArgs:function(){for(var e=location.search.length>0?location.search.substring(1):0,t=e.length>0?e.split("&"):[],a=null,i=null,n=null,o=t.length,r={},s=0;o>s;s++)a=t[s].split("="),i=decodeURIComponent(a[0]),n=decodeURIComponent(a[1]),i.length&&(r[i]=n);return r},getAnalysisData:function(e){var t=this;t.createPortrait(e.ret),t.getAnalyzingData(e.ret)},handleProcess:function(t){var a=this;0==t.ret.show?(o.show("查询公积金后，才能解析你的公积金秘密噢~"),setTimeout(function(){window.location.href=t.ret.url+"?page=query"},1500)):(r.show(),e(".tp-analyzing").fadeIn(),e(".sweat").fadeIn(),setTimeout(function(){r.hide(),e(".tp-analyzing").fadeOut(),e(".sweat").fadeOut(),a.getAnalysisData(t),a.fullPageObj.moveTo(1,!0)},1e3))},swiperHandleProcess:function(t){var a=this;0==t.ret.show?(o.show("查询公积金后，才能解析你的公积金秘密噢~"),setTimeout(function(){window.location.href=t.ret.url+"?page=query"},1500)):(r.show(),e(".tp-analyzing").fadeIn(),e(".sweat").fadeIn(),setTimeout(function(){r.hide(),e(".tp-analyzing").fadeOut(),e(".sweat").fadeOut(),a.getAnalysisData(t),a.mySwiper.slideTo(1,!0)},1e3))},changeState:function(e){window.history.pushState&&window.history.pushState({title:e},e,"index.php?unionid="+unionid+"&shareid="+shareid+"#page=page"+e)},respondState:function(e,t,a,o){var r=this,s=i.Tool.userAgent();n&&s.isGjj?n.onBack(function(){return"page1"==e?!1:(a?r.fullPageObj.moveTo(t,!0):r.fullPageObj.moveTo(t),o&&o(),!0)}):window.onpopstate=function(){a?r.fullPageObj.moveTo(t,!0):r.fullPageObj.moveTo(t),o&&o()}},share:function(){var e=navigator.userAgent,t={mobile:!!e.match(/AppleWebKit.*Mobile.*/),isAndroid:e.indexOf("Android")>-1||e.indexOf("Linux")>-1||e.indexOf("android")>-1,isiOS:/[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,isGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(e)||/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),isAndroidGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(e),isiOSGjj:/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),isGjjFdjsq:/^android\/[\w\W]+client\/[\w\W]+category\/51fdjsq$/.test(e)},a=window.location.host;return t.isGjj&&n&&n.action("quickIcon",{thumb:"https://r.51gjj.com/image/static/ico_title_share_white.png",title:"分享~",onclick:function(){n.action("ShareTimeline",{title:"要不是和你铁，这份公积金档案也不会发给你！",desc:"点击查看我的公积金秘密。",thumb:"https://r.51gjj.com/act/release/img/20170807_new_share.png",link:"https://"+a+"/act/home/huodong/20170807/index.php?shareid="+newShareId})}}),this},share2:function(){var e=navigator.userAgent,t={mobile:!!e.match(/AppleWebKit.*Mobile.*/),isAndroid:e.indexOf("Android")>-1||e.indexOf("Linux")>-1||e.indexOf("android")>-1,isiOS:/[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,isGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(e)||/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),isAndroidGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(e),isiOSGjj:/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),isGjjFdjsq:/^android\/[\w\W]+client\/[\w\W]+category\/51fdjsq$/.test(e)},a=window.location.host;return t.isGjj&&n&&n.action("ShareTimeline",{title:"要不是和你铁，这份公积金档案也不会发给你！",desc:"点击查看我的公积金秘密。",thumb:"https://r.51gjj.com/act/release/img/20170807_new_share.png",link:"https://"+a+"/act/home/huodong/20170824/index.php?shareid="+newShareId}),this}};l.start()});