require.config(requireConfig),require(["jquery","fastClick","lucky-card","ct","bridge","juicer","marquee"],function(t,e,s,i,c){var o=(t(".mask"),Object.create(i.Prompt));o.create().build();var a=Object.create(i.Mask);a.create().build();i.Tool.local();i.Tool.buryPoint();var n,r=(new Date).getDay(),l="//r.51gjj.com/act/release/img/20170703_",d={start:function(){var s=this;e.attach(document.body),i.Tool.setFont(),i.Tool.handleBottomStatusBar(),window.addEventListener("resize",i.Tool.debounce(i.Tool.setFont)),window.addEventListener("resize",i.Tool.debounce(i.Tool.handleBottomStatusBar));var c=Object.create(i.PreLodingUi);c.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),i.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var t=null;clearTimeout(t),t=setTimeout(function(){c.hide(),s.init()},500)}}),t.ajax({type:"POST",dataType:"JSON",url:i.Tool.url("/app/request/activity"),data:JSON.stringify({place_cid:i.Tool.userAgent().isGjj?1:0,tag:"进入页面"+projectName}),success:function(t){1==t.success}});var a=t(".list ul");t.ajax({type:"POST",dataType:"JSON",url:"/act/act170406/get_status",data:JSON.stringify({action:"status"}),success:function(e){if(console.log("滚动条*************************"),n=e.ret.url,1==e.success){if(console.log(111),e.ret.info){for(var i=e.ret.info,c=0;c<i.length;c++){var r=t("<li>");r.text(i[c]),r.appendTo(a)}t(".list").liMarquee({hoverstop:!1,drag:!1,scrollamount:30,direction:"up",runshort:!0})}}else s.status.msg=e.msg||"出错请重试",o.show(e.msg||"出错请重试")},error:function(t){alert(t)}})},init:function(){var e=this;t(".wp").removeClass("hide"),e.openRule(),e.closeRule(),e.timeDown(),e.render(),e.robTicket(),e.skipLoan(),e.close_tip(),e.apply(),e.lookTicket(),e.share()},render:function(){t(".single-info"),t(".awards-info");t.ajax({url:"/act/act170406/get_status",type:"POST",dataType:"json",data:JSON.stringify({action:"render"}),success:function(e){if(console.log(1111),1==e.success){0==e.isLogin&&c&&c.action("login");var e=e.ret;e.UserTicket&&(1==e.UserTicket?(t(".rob200").addClass("grey"),t(".rob200").text("").text("已领取"),t(".ticketMoney:nth-child(1)").append('<img src="http://r.51gjj.com/act/release/img/20170703_seal.png" class="seal">'),t(".ticketMoney:nth-child(2)").addClass("grayscale"),t(".ticketMoney:nth-child(3)").addClass("grayscale"),e.$ticketStatus_100?t(".rob100").addClass("grey"):(t(".rob100").addClass("grey"),t(".rob100").text("").text("抢完")),e.$ticketStatus_50?t(".rob50").addClass("grey"):(t(".rob50").addClass("grey"),t(".rob50").text("").text("抢完")),a.show(),t(".ticket_50").html("<img src='"+l+"ticket_200.png'><div class='ticket_close'></div><div class='skip'></div>"),t(".ticket_50").fadeIn()):2==e.UserTicket?(t(".rob100").addClass("grey"),t(".rob100").text("").text("已领取"),t(".ticketMoney:nth-child(2)").append('<img src="http://r.51gjj.com/act/release/img/20170703_seal.png" class="seal">'),t(".ticketMoney:nth-child(1)").addClass("grayscale"),t(".ticketMoney:nth-child(3)").addClass("grayscale"),e.$ticketStatus_200?t(".rob200").addClass("grey"):(t(".rob200").addClass("grey"),t(".rob200").text("").text("抢完")),e.$ticketStatus_50?t(".rob50").addClass("grey"):(t(".rob50").addClass("grey"),t(".rob50").text("").text("抢完")),a.show(),t(".ticket_50").html("<img src='"+l+"ticket_100.png'><div class='ticket_close'></div><div class='skip'></div>"),t(".ticket_50").fadeIn()):3==e.UserTicket?(t(".rob50").addClass("grey"),t(".rob50").text("").text("已领取"),t(".ticketMoney:nth-child(3)").append('<img src="http://r.51gjj.com/act/release/img/20170703_seal.png" class="seal">'),t(".ticketMoney:nth-child(1)").addClass("grayscale"),t(".ticketMoney:nth-child(2)").addClass("grayscale"),e.$ticketStatus_200?t(".rob200").addClass("grey"):(t(".rob200").addClass("grey"),t(".rob200").text("").text("抢完")),e.$ticketStatus_100?t(".rob100").addClass("grey"):(t(".rob100").addClass("grey"),t(".rob100").text("").text("抢完")),a.show(),t(".ticket_50").html("<img src='"+l+"ticket_50.png'><div class='ticket_close'></div><div class='skip'></div>"),t(".ticket_50").fadeIn()):(e.$ticketStatus_50?console.log("有50元券"):(t(".rob50").addClass("grey"),t(".rob50").text("").text("抢完"),t(".ticketMoney:nth-child(3)").addClass("grayscale")),e.$ticketStatus_100||(t(".rob100").addClass("grey"),t(".rob100").text("").text("抢完"),t(".ticketMoney:nth-child(2)").addClass("grayscale")),e.$ticketStatus_200||(t(".rob200").addClass("grey"),t(".rob200").text("").text("抢完"),t(".ticketMoney:nth-child(1)").addClass("grayscale"))))}else o.show(e.msg||"获取不到中奖信息")},error:function(t){console.log(t)}})},robTicket:function(){var e=this;t(".tickets .ticketMoney:nth-child(1)").on("click",function(){console.log("200元"),t.ajax({type:"POST",dataType:"json",url:"/act/act170406/get_rob",data:JSON.stringify({type:1}),success:function(s){if(1==s.success){var s=s.ret;console.debug("条件",s.allowRob,s.UserTicket),1==s.allowRob&&4===s.UserTicket?(a.show(),t(".ticket_50").html("<img src='"+l+"ticket_200.png'><div class='ticket_close'></div><div class='skip' bp='200元去申请' title='200元去申请'></div>"),t(".ticket_50").fadeIn(),e.render()):o.show(s.msg||"出错请重试")}else o.show(1==s.code?s.msg:s.msg||"出错请重试")},error:function(t,e,s){alert(t.status),alert(t.readyState),alert(e),alert(JSON.stringify(t)),alert(s)}})}),t(".tickets .ticketMoney:nth-child(2)").on("click",function(){console.log("100元"),t.ajax({type:"POST",dataType:"json",url:"/act/act170406/get_rob",data:JSON.stringify({type:2}),success:function(s){if(1==s.success){var s=s.ret;console.debug("条件",s.allowRob,s.UserTicket),1==s.allowRob&&4===s.UserTicket?(a.show(),t(".ticket_50").html("<img src='"+l+"ticket_100.png'><div class='ticket_close'></div><div class='skip' bp='100元去申请' title='100元去申请'></div>"),t(".ticket_50").fadeIn(),e.render()):o.show(s.msg||"出错请重试")}else o.show(1==s.code?s.msg:s.msg||"出错请重试")},error:function(t,e,s){alert(s)}})}),t(".tickets .ticketMoney:nth-child(3)").on("click",function(){console.log("50元"),t.ajax({type:"POST",dataType:"json",url:"/act/act170406/get_rob",data:JSON.stringify({type:3}),success:function(s){if(1==s.success){var s=s.ret;console.debug("条件",s.allowRob,s.UserTicket),1==s.allowRob&&4===s.UserTicket?(a.show(),t(".ticket_50").html("<img src='"+l+"ticket_50.png'><div class='ticket_close'></div><div class='skip' bp='50元去申请' title='50元去申请'></div>"),t(".ticket_50").fadeIn(),e.render()):o.show(s.msg||"出错请重试")}else o.show(1==s.code?s.msg:s.msg||"出错请重试")},error:function(t,e,s){alert(s)}})})},skipLoan:function(){t(".ticket_50").on("click",".skip",function(){console.debug("点击随机跳转"),window.location.href=n})},apply:function(){t(".apply1").on("click",function(){var e={type:"1"};console.log("data",JSON.stringify(e)),e=JSON.stringify(e),t.ajax({type:"POST",dataType:"JSON",url:"/act/act170406/get_url",data:JSON.stringify({type:1}),success:function(t){1==t.success?window.location.href=t.ret.url:o.show(1==t.code?t.msg:t.msg||"出错请重试")}})}),t(".apply2").on("click",function(){t.ajax({type:"POST",dataType:"JSON",url:"/act/act170406/get_url",data:JSON.stringify({type:2}),success:function(t){1==t.success?window.location.href=t.ret.url:o.show(1==t.code?t.msg:t.msg||"出错请重试")}})}),t(".apply3").on("click",function(){t.ajax({type:"POST",dataType:"JSON",url:"/act/act170406/get_url",data:JSON.stringify({type:3}),success:function(t){1==t.success?window.location.href=t.ret.url:o.show(1==t.code?t.msg:t.msg||"出错请重试")}})})},close_tip:function(){t(".ticket_50").on("click",".ticket_close",function(){t(".ticket_50").fadeOut(function(){a.hide()})})},openRule:function(){t(".content").on("click",".rule-btn",function(){a.show(),t(".rule").fadeIn()})},closeRule:function(){t("body").on("click",".btn-close",function(){t(".rule").fadeOut(function(){a.hide()})})},lookTicket:function(){t(".myTicket").on("click","span",function(){t(this).data("link");t.ajax({type:"POST",dataType:"JSON",url:"/act/act170406/get_url",data:JSON.stringify({type:4}),success:function(t){1==t.success?window.location.href=t.ret.url:o.show(t.msg||"出错请重试")}})})},share:function(){var t=navigator.userAgent,e={mobile:!!t.match(/AppleWebKit.*Mobile.*/),isAndroid:t.indexOf("Android")>-1||t.indexOf("Linux")>-1||t.indexOf("android")>-1,isiOS:/[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),webApp:-1==t.indexOf("Safari"),weixin:t.indexOf("MicroMessenger")>-1,isGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(t)||/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),isAndroidGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(t),isiOSGjj:/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),isGjjFdjsq:/^android\/[\w\W]+client\/[\w\W]+category\/51fdjsq$/.test(t)},s=window.location.host;return e.isGjj&&c&&c.action("quickIcon",{thumb:"https://r.51gjj.com/image/static/ico_title_share_dark.png",onclick:function(){c.action("ShareTimeline",{title:"我获得了200元还款金！",desc:"公积金定制贷款，今天申请立减200元还款金。",thumb:"https://r.51gjj.com/act/release/img/20170523_share.png",link:"https://"+s+"/act/home/huodong/20170703/"})}}),this},timeDown:function(){function e(e){var s=new Array;s[0]=e.getHours(),s[1]=e.getMinutes(),s[2]=e.getSeconds();var i=60*s[0]*60+60*s[1]+s[2],c=86400-i,o=new Array;o[0]=parseInt(c/3600),console.log("小时",o[0]),o[1]=parseInt((c-60*o[0]*60)/60),console.log("分钟",o[1]),o[2]=c-60*o[0]*60-60*o[1],console.log("秒",o[2]),setInterval(function(){o[2]>0?o[2]--:(o[2]=59,o[1]>0?o[1]--:(o[1]=59,o[0]>0?o[0]--:o[0]=23));for(var e=new Array,s=0;3>s;++s)e[s]=String(o[s]),o[s]<10&&(e[s]="0"+e[s]);var i=e[0]+":"+e[1]+":"+e[2];t(".timeClock .nowTime").html(""),t(".timeClock .nowTime").append(i)},1e3)}2===r||3===r?(2===r?(e(new Date),t(".clockTip").text("距开始")):3===r&&t(".clockTip").text("距结束"),e(new Date)):(t(".clockTip").text("活动时间为每周三"),t(".timeClock img").remove())}};d.start()});