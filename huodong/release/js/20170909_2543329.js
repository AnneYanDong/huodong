require.config(requireConfig),require(["jquery","fastClick","FullPage","ct","bridge","juicer","qrcode"],function(e,t,i,s){var r=(e(".mask"),Object.create(s.Prompt));r.create().build();var a=Object.create(s.Mask);a.create().build();s.Tool.local(),window.location.host;s.Tool.buryPoint_v2(0);var o={start:function(){var i=this;t.attach(document.body),s.Tool.setFont(),window.addEventListener("resize",s.Tool.debounce(s.Tool.setFont));var r=Object.create(s.PreLodingUi);r.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),s.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var e=null;clearTimeout(e),e=setTimeout(function(){r.hide(),i.init()},500)}}),e.ajax({type:"POST",dataType:"JSON",url:s.Tool.url("/act/request/activity"),data:JSON.stringify({source:s.Tool.userAgent().isGjj?1:0,tag:"20170901_1_0_0_进入页面"}),success:function(e){1==e.success}})},init:function(){var t=this;e(".wp").removeClass("hide"),t.render(),t.openRule1(),t.openRule2(),t.closeRule1(),t.closeLottery(),t.pageload(),t.myPrize(),t.closePrize(),t.skip()},render:function(){e.ajax({type:"POST",url:"test.php",dataType:"json",success:function(t){var i=t.resData.lotteryTime;e(".lottery-change span").text(i)}}),e.ajax({type:"POST",url:"test.php",dataType:"json",success:function(t){var i=t.resData.totalTenderAmount;console.log(i),e(".btn-tips span").text(i)}})},openRule1:function(){e(".btn-lottery-rule").on("click",function(){a.show(),e(".rule-1").fadeIn()})},openRule2:function(){e(".btn-rule-2").on("click",function(){a.show(),e(".rule-2").fadeIn()})},closeRule1:function(){e("body").on("click",".btn-close",function(){e(".rule").fadeOut(function(){a.hide()})})},closeLottery:function(){e(".prize-box-lottery").on("click",".btn-close",function(){e(this).parent().addClass("hide"),e(".mask").addClass("hide")})},pageload:function(){function t(){return s.times+=1,s.roll(),s.times>s.cycle+10&&s.prize==s.index?(clearTimeout(s.timer),i.removeClass("hide"),setTimeout(function(){switch(s.prize){case 0:e(".prize-box-0").removeClass("hide");break;case 1:e(".prize-box-1").removeClass("hide");break;case 2:e(".prize-box-2").removeClass("hide");break;case 3:e(".prize-box-3").removeClass("hide");break;case 4:e(".prize-box-4").removeClass("hide");break;case 5:e(".prize-box-5").removeClass("hide");break;case 6:e(".prize-box-6").removeClass("hide");break;case 7:e(".prize-box-7").removeClass("hide")}s.prize=-1,s.times=0,r=!1},250)):(s.times<s.cycle?s.speed-=10:s.times==s.cycle||(s.speed+=s.times>s.cycle+10&&(0==s.prize&&7==s.index||s.prize==s.index+1)?110:20),s.speed<40&&(s.speed=40),s.timer=setTimeout(t,s.speed)),!1}var i=e(".mask"),s=(e(".no-chance"),{index:0,count:0,timer:0,speed:20,times:0,cycle:50,prize:-1,init:function(t){e("#"+t).find(".lottery-box").length>0&&($lottery=e("#"+t),$units=$lottery.find(".lottery-box"),this.obj=$lottery,this.count=$units.length,$lottery.find(".lottery-box-"+this.index).addClass("lottery-active"))},roll:function(){var t=this.index,i=this.count,s=this.obj;return e(s).find(".lottery-box-"+t).removeClass("lottery-active"),t+=1,t>i-1&&(t=0),e(s).find(".lottery-box-"+t).addClass("lottery-active"),this.index=t,!1},stop:function(e){return this.prize=e,!1}}),r=!1;s.init("lottery"),e(".lottery-start").click(function(){return r?!1:void e.ajax({url:"test.php",type:"POST",dataType:"json",data:{action:"lottery"},success:function(e){if(1==e.resCode){var i=e.resData.type,a=null;switch(i){case 1:a=1;break;case 2:a=7;break;case 3:a=3;break;case 4:a=6;break;case 5:a=0;break;case 6:a=2;break;case 7:a=4;break;case 8:a=5}return s.stop(a),console.log("****,",a),s.speed=100,t(),r=!0,!1}alert(e.errmsg||"出错，请重试",2e3)},error:function(e){alert(e,2e3)}})})},myPrize:function(){e(".wrap-button").on("click",".btn-prize",function(){e(".mask").removeClass("hide"),e(".prize-list").removeClass("hide"),e.ajax({type:"POST",url:"//test.jianbing.com/lottery/QueryLotteryRecord/lotteryRecord",dataType:"json",success:function(t){if(0!=t.resData.list.length){var i='<div class="has-prize"><div class="prize-icon"><img src="//r.51gjj.com/act/release/img/20170909_prize_list_'+t.resData.list[0].type+'.png"></div></div>';e(".has-prize").length<=0&&(console.log(e(".prize-list").length),e(".prize-list").append(i)),1==t.resData.list[0].type?e(".has-prize").append('<div class="prize-text">iphone8(32G)</div>'):2==t.resData.list[0].type?e(".has-prize").append('<div class="prize-text">500元京东卡</div>'):3==t.resData.list[0].type?e(".has-prize").append('<div class="prize-text">小米手环</div>'):4==t.resData.list[0].type?e(".has-prize").append('<div class="prize-text">小米充电宝</div>'):5==t.resData.list[0].type?e(".has-prize").append('<div class="prize-text">50元京东卡</div>'):6==t.resData.list[0].type?e(".has-prize").append('<div class="prize-text">爱奇艺月卡</div>'):7==t.resData.list[0].type&&e(".has-prize").append('<div class="prize-text">5元现金</div>')}else{var i='<div class="wrap-no-prize"><div class="no-prize-img"></div><div class="null-text">还是空的，快去抽奖吧！</div></div>';e(".prize-list").append(i)}}})})},closePrize:function(){e(".prize-list").on("click",".btn-prize-conf",function(){e(".mask").addClass("hide"),e(".prize-list").addClass("hide"),e(".has-prize").remove()})},skip:function(){e(".wrap-button").on("click",".btn-change",function(){window.location.href="/hs/appgjj/login?return_url=/app/invest/"}),e(".toPurchase").on("click",function(){window.location.href="/hs/appgjj/login?return_url=/app/invest/"})}};o.start()});