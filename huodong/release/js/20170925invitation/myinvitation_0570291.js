require.config(requireConfig),require(["ct","Vue","bridge"],function(t,e,o){function i(e){var o=$(".vue-loading-wrap");o.addClass("vue-loading-hide"),setTimeout(function(){o.remove(),e&&t.Tool.isFunction(e)&&e()},0)}function n(){var t=['<transition name="opacity">','<div class="mask" v-if="show" ref="mask"></div>',"</transition>"];return{props:{show:{type:[Boolean],"default":!1}},template:t.join(""),data:function(){return{}},created:function(){},mounted:function(){this.banScroll()},methods:{banScroll:function(){this.$refs.mask.addEventListener("touchmove",function(t){t.preventDefault()})}}}}function s(){window.vm=new e({el:".wp",data:{init:!1,scrollShow:!1,page:{},draw:!1,username:"",useralipay:""},components:{"my-mask":n()},created:function(){i(function(){vm.init=!0})},mounted:function(){this.getProcess(),t.Tool.buryPoint_v2()},computed:{maskShow:function(){return this.draw}},methods:{toggleRule:function(){this.draw=!this.draw},active:function(t){var e=this,o=$(t.currentTarget),i=e.$refs.list,n=e.$refs.invitation;o.hasClass("active")?o.removeClass("active"):o.addClass("active");var s=e.$refs.line,a=e.$refs.process,r=a&&a.offsetHeight,c=s&&s.offsetHeight,u=i.offsetHeight-n.offsetHeight;return 0>=u?void(e.scrollShow=!1):(e.scrollShow=!0,void("undefined"!=typeof a&&(a.style.top=n.scrollTop*(c-r)/u+"px")))},setLine:function(){var t=this,e=t.$refs.list,o=t.$refs.invitation;o.addEventListener("scroll",function(){var i=t.$refs.line,n=t.$refs.process,s=n&&n.offsetHeight,a=i&&i.offsetHeight,r=e.offsetHeight-o.offsetHeight;return 0>=r?void(t.scrollShow=!1):(t.scrollShow=!0,void("undefined"!=typeof n&&(n.style.top=o.scrollTop*(a-s)/r+"px")))})},getProcess:function(){var e=this;$.ajax({url:t.Tool.url("/act/act170921/get_progress"),dataType:"json",type:"get",data:{},success:function(t){t.success?t.ret.login?(e.$set(e.page,"info",t.ret),e.$nextTick(function(){e.setLine()})):e.$set(e.page,"info",t.ret):r.show(t.msg||"fail")},fail:function(){}})},withdraw:function(){var e=this;return this.page.info.current_reward<=0?(r.show("您没有可以提现的金额，赶快去邀请好友吧！"),!1):void(this.page.info.alipay?this.draw=!0:$.ajax({url:t.Tool.url("/act/act170921/withdraw_cash"),dataType:"json",type:"get",data:{},success:function(t){t.success?t.ret.login?(r.show("提现成功"),e.page.info.current_reward=t.ret.current_reward,e.page.info.total_reward=t.ret.total_reward):a.isGjj&&o?o.action("login"):r.show("请在51公积金管家参与活动"):r.show(t.msg||"错误")},fail:function(){}}))},enterAlipay:function(){var e=this;$.ajax({url:t.Tool.url("/act/act170921/save_cash"),dataType:"json",type:"post",data:JSON.stringify({name:e.username,alipay:e.useralipay}),success:function(t){t.success?t.ret.login?(r.show("提现成功"),e.page.info.current_reward=t.ret.current_reward,e.page.info.total_reward=t.ret.total_reward,e.draw=!e.draw):a.isGjj&&o?o.action("login"):r.show("请在51公积金管家参与活动"):r.show(t.msg||"错误")},fail:function(){}})},invite:function(){$.ajax({type:"get",dataType:"json",url:t.Tool.url("/act/act170921/invite"),data:{},success:function(e){e.success?e.ret.login?o&&a.isGjj&&o.action("ShareTimeline",{title:"您的好友邀请您一起来查公积金",desc:"实时了解你的公积金账户动况，激活您的潜在财富！",thumb:"https://r.51gjj.com/image/static/invitation.png",link:t.Tool.url("/act/home/huodong/20170925invitation/regist.php?invite="+e.ret.invite+"&inviter="+e.ret.inviter)}):r.show("邀请好友需要在APP登陆后操作"):r.show(e.msg||"错误")},fail:function(){}})}}})}t.Tool.setFont();var a=t.Tool.userAgent(),r=(t.Tool.userAgent(),Object.create(t.Prompt).create().build());window.addEventListener("resize",t.Tool.debounce(t.Tool.setFont)),s()});