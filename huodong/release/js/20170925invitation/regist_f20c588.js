require.config(requireConfig),require(["ct","Vue","bridge"],function(e,o){function t(o){var t=$(".vue-loading-wrap");t.addClass("vue-loading-hide"),setTimeout(function(){t.remove(),o&&e.Tool.isFunction(o)&&o()},0)}function n(){var e=['<div class="phonecode-wrap" :class="stylecls">','<input class="code" placeholder="请输入验证码">','<div class="get-code" bp="91_2_2_0_验证码" @click="getCode"><span class="code-txt" v-text="codeTxt"></span></div>',"</div>"];return{props:{stylecls:{type:String,"default":"phonecode-default"},codetime:{type:[Number,String],"default":60},codeurl:{type:[String]},phone:{type:[String,Number]}},template:e.join(""),data:function(){return{codeTxt:"获取验证码",codeFlag:!0,time:""}},mounted:function(){this.time=this.codetime},methods:{getCode:function(){var e=this;return e.codeurl?e.phone?e.codeFlag?(e.codeFlag=!1,void $.ajax({type:"post",dataType:"json",url:e.codeurl,data:JSON.stringify({phone:e.phone}),success:function(o){o.success?e.timedown():300==o.code?c.show(o.msg,{callback:function(){window.location.href="appdown.php"}}):(e.codeFlag=!0,c.show(o.msg||"错误"))},fail:function(){}})):(c.show("请勿重复获取验证码"),!1):(c.show("phone不存在"),!1):(c.show("codeurl不存在"),!1)},timedown:function(){function e(){setTimeout(function(){return o.time<=0?(o.codeTxt="获取验证码",o.codeFlag=!0,void(o.time=o.codetime)):(o.time--,o.codeTxt=o.time,void e())},1e3)}var o=this;o.codeTxt=o.time,e()}}}}function i(){var i=n();window.vm=new o({el:".wp",data:{init:!1,getCodeUrl:e.Tool.url("/act/act170921/send_captcha"),phone:"",inviter:"",myTip:""},filters:{phonenumber:function(e){return(e+"").replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")}},components:{"my-phonecode":i},created:function(){t(function(){vm.init=!0}),this.inviter=e.Tool.getUrlData("inviter")},mounted:function(){e.Tool.buryPoint_v2()},methods:{apply:function(){$.ajax({type:"post",dataType:"json",url:e.Tool.url("/act/act170921/register"),data:JSON.stringify({phone:vm.phone,code:$(".code").val(),invite:e.Tool.getUrlData("invite")}),success:function(e){e.success?(console.log("fsf"),window.location.href="appdown.php"):c.show(e.msg||"错误")},fail:function(e){c.show(e||"错误")}})}}})}e.Tool.setFont();var c=Object.create(e.Prompt);c.create().build(),window.addEventListener("resize",e.Tool.debounce(e.Tool.setFont)),i()});