require.config(requireConfig),require(["jquery","fastClick","FullPage","ct","bridge","juicer"],function(e,a,t,n,o,l){var i=(e(".mask"),Object.create(n.Prompt));i.create().build();var s=Object.create(n.Mask);s.create().build();n.Tool.local();n.Tool.buryPoint();var r=[],g=[],c=[],d=null,p=[],u=null,m=[],h=null,f=[],v={iconName:[],start:function(){var t=this;a.attach(document.body),n.Tool.setFont(),n.Tool.handleBottomStatusBar(),window.addEventListener("resize",n.Tool.debounce(n.Tool.setFont)),window.addEventListener("resize",n.Tool.debounce(n.Tool.handleBottomStatusBar));var o=Object.create(n.PreLodingUi);o.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),n.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var e=null;clearTimeout(e),e=setTimeout(function(){o.hide(),t.init()},500)}}),e.ajax({type:"POST",dataType:"JSON",url:n.Tool.url("/app/request/activity"),data:JSON.stringify({place_cid:n.Tool.userAgent().isGjj?1:0,tag:"进入页面"+projectName}),success:function(e){e.success}})},init:function(){console.log("私人订制活动");var a=this;e(".wp").removeClass("hide"),a.fullPageObj=a.fullpage()},fullpage:function(){var a=this,t=document.getElementsByClassName("wp-inner")[0].fullpage({start:0,beforeChange:function(e){var t="page"+(e.next+1);console.log("now",t),a.changeState(t)},afterChange:function(t){a.fullPageObj.stop();var n="page"+(t.cur+1);if("page1"==n&&(e(".page1 li").removeClass("rotating"),e(".page1 li").unbind().on("click",function(){var t=e(this);t.attr("disabled","disabled"),g=t.data("loan-total"),c.length=0,c.push(g),console.log("loanTotal",c);var n=null;clearTimeout(n),n=setTimeout(function(){t.addClass("bounce-out"),clearTimeout(n),n=setTimeout(function(){a.fullPageObj.moveTo(1,!0),t.removeAttr("disabled")},1200)},200)}),a.respondState(n)),"page2"==n&&(e(".page1 li").removeClass("rotating").removeAttr("disabled"),e(".page2 li").unbind().on("click",function(){var t=e(this);t.attr("disabled","disabled");var n=null;clearTimeout(n),n=setTimeout(function(){t.addClass("bounce-out"),clearTimeout(n),n=setTimeout(function(){a.fullPageObj.moveTo(2,!0)},1200)},200),d=t.data("loan-time"),p.length=0,p.push(d),console.log("点击时time:",p)}),a.respondState(n,0,!0,function(){console.log("返回第一页"),e(".page1 li").removeClass("rotating"),c.length=0,g=null,console.log("返回时loanTotal:",c)})),"page3"==n&&(e(".page3 li").unbind().on("click",function(){var t=e(this);t.attr("disabled","disabled");var n=null;clearTimeout(n),n=setTimeout(function(){t.addClass("bounce-out"),clearTimeout(n),n=setTimeout(function(){a.fullPageObj.moveTo(3,!0)},1200)},200),u=t.data("loan-release"),m.length=0,m.push(u)}),a.respondState(n,1,!0,function(){console.log("返回第二页"),e(".page2 li").removeClass("rotating").removeAttr("disabled"),p.length=0,d=null})),"page4"==n&&(e(".page4 .circle div").unbind().on("click",function(){var t=e(this);t.attr("disabled","disabled"),h=t.data("loan-focus"),f.length=0,f.push(h),r.length=0,r.push(c,p,m,f);var n=null;clearTimeout(n),n=setTimeout(function(){t.addClass("circle-rotating"),clearTimeout(n),n=setTimeout(function(){a.getAnalysisData()},1200)},200)}),a.respondState(n,2,!0,function(){console.log("返回第三页"),e(".page3 li").removeClass("rotating").removeAttr("disabled"),m.length=0,u=null})),"page5"==n){var o=data;e(".page5 .loan-match span").addClass("progress"),e(".page5 .final-loan").unbind().on("click",".finger-box",function(){e(this).attr("disabled","disabled"),e(".page5 .finger").addClass("hide").removeClass("move"),e(".page5 .fingerprint").removeClass("hide"),e(".page5 .finger-scan").removeClass("hide").addClass("finger-scaning"),setTimeout(function(){console.log("dataObj",o),window.location.href=o.url,e(".page5 .fingerprint").addClass("hide"),e(".page5 .finger-scan").addClass("hide").removeClass("finger-scaning")},1e3)}),e(".page5 .content").unbind().on("click",".test-btn",function(){e(".page5 .content .test-btn").attr("disabled","disabled"),timer=setTimeout(function(){a.fullPageObj.moveTo(0,!0),e(".page5 .content .test-btn").removeAttr("disabled"),c.length=0,g=null,p.length=0,d=null,m.length=0,u=null,f.length=0,h=null,r.length=0,e(".page1 li").removeClass("rotating"),e(".page2 li").removeClass("rotating"),e(".page3 li").removeClass("rotating"),e(".page4 .circle div").removeClass("circle-rotating"),e(".page4 .customization-tp").hide(),e(".page5 .loan-match span").removeClass("progress"),e(".page5 .icon-box").html(""),e(".page5 .loan-name").html(""),e(".page5 .loan-match").html(""),e(".page5 .loan-amount").html(""),e(".page5 .day-rate").html(""),e(".page5 .release-time").html(""),e(".page5 .finger").removeClass("hide").addClass("move"),e(".page5 .fingerprint").addClass("hide"),e(".page5 .finger-scan").addClass("hide").removeClass("finger-scaning")},1500)}),a.respondState(n,3,!0,function(){console.log("返回第四页"),e(".page4 .circle div").removeClass("circle-rotating").removeAttr("disabled"),e(".page5 .loan-match span").removeClass("progress"),e(".page5 .finger").removeClass("hide").addClass("move"),e(".page5 .fingerprint").addClass("hide"),e(".page5 .finger-scan").addClass("hide").removeClass("finger-scaning"),f.length=0,h=null,r.length=0,e(".page4 .customization-tp").hide()})}}});return t},showAnalyzeProcess:function(a){var t=this;e(".page4 .analyzing-process div.span"+a).removeClass("hide").addClass("analyzing"),console.log("counter:",a),5>a&&setTimeout(function(){t.showAnalyzeProcess(a+1)},500)},getAnalysisData:function(){var a=this;console.log("请求传递的数据：",r),e.ajax({type:"POST",dataType:"JSON",data:JSON.stringify(r),url:"/act/act170801/get_button",success:function(t){t.success?(data=t.ret.data,console.log("data->",data),1==data.sex&&(e(".page4 .customization-tp").fadeIn(),a.showAnalyzeProcess(0),a.showIcon(),a.getLoanInfo(),setTimeout(function(){a.fullPageObj.moveTo(4,!0),e(".page4 .analyzing-process div").removeClass("analyzing").addClass("hide")},5e3)),2==data.sex&&(e(".page4 .customization-tp .male").hide(),e(".page4 .customization-tp").fadeIn(),e(".page4 .customization-tp .female").show(),a.showAnalyzeProcess(0),a.showIcon(),a.getLoanInfo(),setTimeout(function(){a.fullPageObj.moveTo(4,!0),e(".page4 .analyzing-process div").removeClass("analyzing").addClass("hide")},5e3))):i.show(t.msg||"出错了请重试")}})},changeState:function(e){window.history.pushState&&window.history.pushState({title:e},e,"index.php#page="+e)},respondState:function(e,a,t,l){var i=this,s=n.Tool.userAgent();o&&s.isGjj?o.onBack(function(){return"page1"==e?!1:(t?i.fullPageObj.moveTo(a,!0):i.fullPageObj.moveTo(a),l&&l(),!0)}):window.onpopstate=function(){t?(console.log(i.fullPageObj),i.fullPageObj.moveTo(a,!0)):i.fullPageObj.moveTo(a),l&&l()}},showIcon:function(){var a=data.show.length;console.log("len->",a),e(".page5 .icon-box").html("");for(var t=0;a>t;t++){var n=document.createElement("li"),o=document.createElement("img"),l=document.createElement("span");n.append(o),n.append(l),e(".icon-box").append(n),l.innerHTML=data.show[t],"小额度"==l.innerHTML&&(o.src="http://r.51gjj.com/act/release/img/20170801_page5_xed_icon.png"),"放款快"==l.innerHTML&&(o.src="http://r.51gjj.com/act/release/img/20170801_page5_fkk_icon.png"),"分期长"==l.innerHTML&&(o.src="http://r.51gjj.com/act/release/img/20170801_page5_fqc_icon.png"),"急用钱"==l.innerHTML&&(o.src="http://r.51gjj.com/act/release/img/20170801_page5_jyq_icon.png"),"精明派"==l.innerHTML&&(o.src="http://r.51gjj.com/act/release/img/20170801_page5_jmp_icon.png"),"大额度"==l.innerHTML&&(o.src="http://r.51gjj.com/act/release/img/20170801_page5_ded_icon.png")}},getLoanInfo:function(){var a=e("#tpl-loan-name").html(),t=l(a,data);e(".page5 .loan-name").html(""),e(".page5 .loan-name").append(t);var n=e("#tpl-loan-match").html(),o=l(n,data);e(".page5 .loan-match").html(""),e(".page5 .loan-match").append(o);var i=e("#tpl-loan-amount").html(),s=l(i,data);e(".page5 .loan-amount").html(""),e(".page5 .loan-amount").append(s);var r=e("#tpl-day-rate").html(),g=l(r,data);e(".page5 .day-rate").html(""),e(".page5 .day-rate").append(g);var c=e("#tpl-release-time").html(),d=l(c,data);e(".page5 .release-time").html(""),e(".page5 .release-time").append(d)}};v.start()});