require.config(requireConfig),require(["jquery","fastClick","lucky-card","ct","bridge","juicer","marquee"],function(e,t,o,n,i){var c=(e(".mask"),Object.create(n.Prompt));c.create().build();var u=Object.create(n.Mask);u.create().build();n.Tool.local();n.Tool.buryPoint();var l=((new Date).getDay(),null),r=null,s={start:function(){var o=this;t.attach(document.body),n.Tool.setFont(),window.addEventListener("resize",n.Tool.debounce(n.Tool.setFont));var i=Object.create(n.PreLodingUi);i.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),l=n.Tool.userAgent(),n.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var e=null;clearTimeout(e),e=setTimeout(function(){i.hide(),o.init()},500)}}),e.ajax({type:"POST",dataType:"JSON",url:n.Tool.url("/app/request/activity"),data:JSON.stringify({place_cid:n.Tool.userAgent().isGjj?1:0,tag:"进入页面"+projectName}),success:function(e){1==e.success}})},init:function(){var t=this;e(".wp").removeClass("hide"),t.render(),t.openRule(),t.closeRule(),t.apply(),t.compute(),t.use(),t.close()},render:function(){e.ajax({type:"POST",dataType:"JSON",url:"/act/act170606/get_status",success:function(t){t.success?0==t.ret.login?i&&i.action("login"):1==t.ret.have&&(r=t.ret.url,u.show(),e(".wp").append('<div class="prize"><img src="//r.51gjj.com/act/release/img/20170606_prize.png"/><div class="use" bp="立即使用" title="立即使用"></div></div>')):c.show(t.msg||"出错请重试")}})},compute:function(){var t=this;e(".loan input").keyup(function(){var o=e(".loan input").val();console.log(o),t.checkNum()&&(console.log(111),"2"===o?(console.log(2222),e(".result").html("104.41")):e(".result").html("3"==o?"156.62":"4"==o?"208.82":"5"==o?"261.03":"6"==o?"313.23":"7"==o?"365.44":"8"==o?"417.64":"9"==o?"469.85":""))})},checkNum:function(){var t=/^([2-9]{1})+$/,o=e(".loan input").val();return""==o&&e(".result").html(""),t.test(o)||""==o?!0:void c.show("请输入2~9整数")},openRule:function(){e(".content").on("click",".rule-btn",function(){u.show(),e(".rule").fadeIn()})},closeRule:function(){e("body").on("click",".btn-close",function(){e(".rule").fadeOut(function(){u.hide()})})},apply:function(){var t=null;clearTimeout(t),e(".wp .content").on("click",".receive",function(){e.ajax({type:"POST",dataType:"JSON",url:"/act/act170606/get_prize",success:function(o){o.success?1==o.ret.type?t=setTimeout(function(){c.show("您已有券，请先去使用"),t=setTimeout(function(){window.location.href=o.ret.url},1e3)},200):2==o.ret.type?t=setTimeout(function(){u.show(),e(".wp").append('<div class="prize"><img src="//r.51gjj.com/act/release/img/20170606_msg.png"/></div>'),t=setTimeout(function(){window.location.href=o.ret.url},1e3)},200):3==o.ret.type?(t=setTimeout(function(){c.show("抱歉不符合条件，请去其他试试吧")},300),t=setTimeout(function(){window.location.href=o.ret.url},1e3)):c.show(o.msg||"出错请重试"):c.show(o.msg||"出错请重试")}})})},use:function(){e(document).on("click",".prize .use",function(){window.location.href=r})},close:function(){e(".mt-mask").on("click",function(){e(".prize").length>0&&(e(".mt-mask").css("display","none"),e(".prize").remove())})}};s.start()});