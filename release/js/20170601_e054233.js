require.config(requireConfig),require(["jquery","fastClick","lucky-card","ct","bridge","juicer","marquee"],function(e,t,o,n,i){var a=(e(".mask"),Object.create(n.Prompt));a.create().build();var s=Object.create(n.Mask);s.create().build();n.Tool.local();n.Tool.buryPoint();var c=((new Date).getDay(),null),l=null,r=null,u={status:{weChat:!1,login:!1,code:"",msg:""},start:function(){var o=this;t.attach(document.body),n.Tool.setFont(),n.Tool.handleBottomStatusBar(),window.addEventListener("resize",n.Tool.debounce(n.Tool.setFont)),window.addEventListener("resize",n.Tool.debounce(n.Tool.handleBottomStatusBar));var i=Object.create(n.PreLodingUi);i.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),c=n.Tool.userAgent(),console.log(c),n.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var e=null;clearTimeout(e),e=setTimeout(function(){i.hide(),o.init()},500)}}),e.ajax({type:"POST",dataType:"JSON",url:n.Tool.url("/app/request/activity"),data:JSON.stringify({place_cid:n.Tool.userAgent().isGjj?1:0,tag:"进入页面"+projectName}),success:function(e){1==e.success}})},init:function(){var t=this;e(".wp").removeClass("hide"),t.openRule(),t.closeRule(),t.render(),t.apply(),t.share(),t.pullDown(),t.enter()},render:function(){var t=this;e.ajax({type:"POST",dataType:"JSON",url:"/act/act170601/get_status",success:function(o){o.success?(t.status.login=o.ret.login,t.status.weChat=o.ret.weChat,(0==o.ret.have||1==t.status.weChat)&&(e(".mt-mask").removeClass("hide"),e(".redEnvelope").css("display","block"),e(".redEnvelope").append("<img src='//r.51gjj.com/act/release/img/20170601_redPacket.png'/>")),l=o.ret.url_1,r=o.ret.url_2):(a.show(o.msg||"出错请重试"),o.code&&(t.status.code=o.code))}})},openRule:function(){e(".content").on("click",".rule-btn",function(){s.show(),e(".rule").fadeIn()})},closeRule:function(){e("body").on("click",".btn-close",function(){e(".rule").fadeOut(function(){s.hide()})})},pullDown:function(){var t=this;e(document).on("click",".redEnvelope img",function(){1==t.status.weChat?(a.show("本活动需在app参加"),e(".redEnvelope").remove(),e(".mt-mask").addClass("hide")):0==t.status.login?i&&i.action("login"):e(".redEnvelope img").remove()})},enter:function(){e(document).on("click",".redEnvelope .accept",function(){e.ajax({type:"POST",dataType:"JSON",url:"/act/act170601/get_prize",success:function(t){t.success?(e(".redEnvelope").remove(),e(".mt-mask").addClass("hide")):a.show(t.msg||"出错请重试")}})})},apply:function(){var t=this,o=null;clearTimeout(o),e(document).on("click",".apply",function(){t.status.code?a.show(t.status.msg):1==t.status.weChat?o=setTimeout(function(){a.show("本活动需在app参加"),o=setTimeout(function(){window.location.href="http://d.51gjj.com/"},1500)},200):window.location.href=l}),e(document).on("click",".look",function(){t.status.code?a.show(t.status.msg):1==t.status.weChat?o=setTimeout(function(){a.show("本活动需在app参加"),o=setTimeout(function(){window.location.href="http://d.51gjj.com/"},1500)},200):window.location.href=r})},share:function(){var e=navigator.userAgent,t={mobile:!!e.match(/AppleWebKit.*Mobile.*/),isAndroid:e.indexOf("Android")>-1||e.indexOf("Linux")>-1||e.indexOf("android")>-1,isiOS:/[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,isGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(e)||/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),isAndroidGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(e),isiOSGjj:/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),isGjjFdjsq:/^android\/[\w\W]+client\/[\w\W]+category\/51fdjsq$/.test(e)},o=window.location.host;return t.isGjj&&i&&i.action("quickIcon",{thumb:"https://r.51gjj.com/image/static/ico_title_share_dark.png",onclick:function(){i.action("ShareTimeline",{title:"中国人口日——“我就是红利”",desc:"福利金人人有份，百元京东卡申请就送！",thumb:"https://r.51gjj.com/act/release/img/20170601_share_1.png",link:"http://"+o+"/act/home/huodong/20170601/"})}}),this}};u.start()});