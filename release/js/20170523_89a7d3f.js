require.config(requireConfig),require(["jquery","fastClick","lucky-card","ct","bridge","juicer","marquee"],function(t,e,i,n,c){var o=(t(".mask"),Object.create(n.Prompt));o.create().build();var s=Object.create(n.Mask);s.create().build();n.Tool.local();n.Tool.buryPoint();var a,r,l=(new Date).getDay(),d="../static/img/20170523_",u={status:{login:!1,msg:""},charge:{loan:null,type:null,pay:null},start:function(){var i=this;e.attach(document.body),n.Tool.setFont(),n.Tool.handleBottomStatusBar(),window.addEventListener("resize",n.Tool.debounce(n.Tool.setFont)),window.addEventListener("resize",n.Tool.debounce(n.Tool.handleBottomStatusBar));var c=Object.create(n.PreLodingUi);c.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),n.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var t=null;clearTimeout(t),t=setTimeout(function(){c.hide(),i.init()},500)}}),console.log("..222..");var s=t("#lottery");s[0].style.width=t(".content").width()+"px";{var r=t(".single-info");t(".awards-info")}t.ajax({type:"POST",dataType:"JSON",url:n.Tool.url("/app/request/activity"),data:JSON.stringify({place_cid:n.Tool.userAgent().isGjj?1:0,tag:"进入页面"+projectName}),success:function(t){1==t.success}}),t.ajax({type:"POST",dataType:"JSON",url:"/act/act170406/get_status",data:JSON.stringify({action:"status"}),success:function(e){if(a=e.ret.url,1==e.success){if(e.ret.info){for(var n=e.ret.info,c=0;c<n.length;c++){var s=t("<span>");s.text("恭喜："+n[c].name+"抢到"+n[c].money+"元券"),s.appendTo(r)}r.liMarquee({hoverstop:!1,drag:!1,scrollamount:30}),t(".single-info").height(t(".awards-info").height())}}else i.status.msg=e.msg||"出错请重试",o.show(e.msg||"出错请重试")}})},init:function(){var e=this;t(".wp").removeClass("hide"),e.apply(),e.openRule(),e.closeRule(),e.render(),e.open1(),e.close_apply(),e.close_tip(),e.lookTicket(),e.timeDown(),e.share(),e.skipLoan()},render:function(){t(".single-info"),t(".awards-info");t.ajax({url:"/act/act170406/get_status",type:"POST",dataType:"json",data:JSON.stringify({action:"render"}),success:function(e){if(console.log(1111),1==e.success){var e=e.ret;e.UserTicket&&(1==e.UserTicket?(t("#imgId_200").attr("src",d+"done_200.png"),e.$ticketStatus_100?t("#imgId_100").attr("src",d+"doGrey_100.png"):t("#imgId_100").attr("src",d+"none_100.png"),e.$ticketStatus_50?t("#imgId_50").attr("src",d+"doGrey_50.png"):t("#imgId_50").attr("src",d+"none_50.png"),s.show(),t(".ticket_50").html("<img src='"+d+"ticket_200.png'><div class='ticket_close'></div><div id='skip'></div>"),t(".ticket_50").fadeIn()):2==e.UserTicket?(t("#imgId_100").attr("src",d+"done_100.png"),e.$ticketStatus_200?t("#imgId_200").attr("src",d+"doGrey_200.png"):t("#imgId_200").attr("src",d+"none_200.png"),e.$ticketStatus_50?t("#imgId_50").attr("src",d+"doGrey_50.png"):t("#imgId_50").attr("src",d+"none_50.png"),s.show(),t(".ticket_50").html("<img src='"+d+"ticket_100.png'><div class='ticket_close'></div><div id='skip'></div>"),t(".ticket_50").fadeIn()):3==e.UserTicket?(t("#imgId_50").attr("src",d+"done_50.png"),e.$ticketStatus_200?t("#imgId_200").attr("src",d+"doGrey_200.png"):t("#imgId_200").attr("src",d+"none_200.png"),e.$ticketStatus_100?t("#imgId_100").attr("src",d+"doGrey_100.png"):t("#imgId_100").attr("src",d+"none_100.png"),s.show(),t(".ticket_50").html("<img src='"+d+"ticket_50.png'><div class='ticket_close'></div><div id='skip'></div>"),t(".ticket_50").fadeIn()):(e.$ticketStatus_50?t("#imgId_50").attr("src",d+"do_50.png"):t("#imgId_50").attr("src",d+"none_50.png"),e.$ticketStatus_100?t("#imgId_100").attr("src",d+"do_100.png"):t("#imgId_100").attr("src",d+"none_100.png"),e.$ticketStatus_200?t("#imgId_200").attr("src",d+"do_200.png"):t("#imgId_200").attr("src",d+"none_200.png")))}else o.show(e.msg||"获取不到中奖信息")},error:function(t){console.log(t)}})},apply:function(){t(".apply1").on("click",function(){var e={type:"1"};console.log("data",JSON.stringify(e)),e=JSON.stringify(e),t.ajax({type:"POST",dataType:"JSON",url:"/act/act170406/get_url",data:JSON.stringify({type:1}),success:function(t){1==t.success?window.location.href=t.ret.url:o.show(1==t.code?t.msg:t.msg||"出错请重试")}})}),t(".apply2").on("click",function(){t.ajax({type:"POST",dataType:"JSON",url:"/act/act170406/get_url",data:JSON.stringify({type:2}),success:function(t){1==t.success?window.location.href=t.ret.url:o.show(1==t.code?t.msg:t.msg||"出错请重试")}})}),t(".apply3").on("click",function(){t.ajax({type:"POST",dataType:"JSON",url:"/act/act170406/get_url",data:JSON.stringify({type:3}),success:function(t){1==t.success?window.location.href=t.ret.url:o.show(1==t.code?t.msg:t.msg||"出错请重试")}})})},openRule:function(){t(".wrap").on("click",".ruleTop",function(){s.show(),t(".rule").fadeIn()})},closeRule:function(){t("body").on("click",".btn-close",function(){t(".rule").fadeOut(function(){s.hide()})})},lookTicket:function(){t(".myTicket").on("click",function(){t(this).data("link");t.ajax({type:"POST",dataType:"JSON",url:"/act/act170406/get_url",data:JSON.stringify({type:4}),success:function(t){1==t.success?window.location.href=t.ret.url:o.show(t.msg||"出错请重试")}})})},open1:function(){var e=this;t(".ticket").on("click",function(){var i=t(this).index(),n=i-3;t.ajax({type:"POST",dataType:"json",url:"/act/act170406/get_rob",data:JSON.stringify({type:n}),success:function(n){if(1==n.success){var n=n.ret;console.debug("条件",n.allowRob,n.UserTicket),1==n.allowRob&&4===n.UserTicket?(4===i?(s.show(),t(".ticket_50").html("<img src='"+d+"ticket_200.png'><div class='ticket_close'></div><div id='skip'></div>"),t(".ticket_50").fadeIn()):5===i?(s.show(),t(".ticket_50").html("<img src='"+d+"ticket_100.png'><div class='ticket_close'></div><div id='skip'></div>"),t(".ticket_50").fadeIn()):6===i&&(s.show(),t(".ticket_50").html("<img src='"+d+"ticket_50.png'><div class='ticket_close'></div><div id='skip'></div>"),t(".ticket_50").fadeIn()),e.render(),console.debug("index值:"+i)):o.show(n.msg||"出错请重试")}else 1==n.code?(o.show(n.msg),setTimeout(function(){c&&c.action("login")},1e3)):o.show(n.msg||"出错请重试")},error:function(t,e,i){alert(t.status),alert(t.readyState),alert(e),alert(JSON.stringify(t)),alert(i)}})})},close_apply:function(){t(".ticket_50").on("click","a",function(){t(".ticket_50").fadeOut(function(){s.hide()})})},close_tip:function(){t(".ticket_50").on("click",".ticket_close",function(){t(".ticket_50").fadeOut(function(){s.hide()})})},close1:function(){t(".ticket_50").on("click","a",function(){t(".ticket_50").fadeOut(function(){s.hide()})})},skipPage:function(){var e=t("#div1").offset().top;console.log(e),t(document).on("click",".ticket_50",function(){t("body").scrollTop(300),t(".ticket_50").fadeOut(function(){s.hide()})}),t(document).on("click",".scratchM",function(){t("body").scrollTop(e)})},skipLoan:function(){t(".ticket_50").on("click","#skip",function(){console.debug("点击随机跳转"),window.location.href=a}),t(document).on("click",".scratchM",function(){9!=r&&(window.location.href=a)})},share:function(){var t=navigator.userAgent,e={mobile:!!t.match(/AppleWebKit.*Mobile.*/),isAndroid:t.indexOf("Android")>-1||t.indexOf("Linux")>-1||t.indexOf("android")>-1,isiOS:/[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),webApp:-1==t.indexOf("Safari"),weixin:t.indexOf("MicroMessenger")>-1,isGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(t)||/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),isAndroidGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(t),isiOSGjj:/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),isGjjFdjsq:/^android\/[\w\W]+client\/[\w\W]+category\/51fdjsq$/.test(t)},i=window.location.host;return e.isGjj&&c&&c.action("quickIcon",{thumb:"https://r.51gjj.com/image/static/ico_title_share_dark.png",onclick:function(){c.action("ShareTimeline",{title:"抵息券X元 ",desc:"领券后完成活动页面任一业务申请并放款，还款时可直接抵扣，不可提前还款。【金薪贷】首月还款减免。【金花贷】首月还款减免，100元券借款5000元及以上可用，200元券借款10000元及以上可用。【金盈贷】分月减免，50元券分3个月减免，100元券、200元券分4个月减免。",thumb:"https://r.51gjj.com/act/release/img/20170523_share.png",link:"https://"+i+"/act/home/huodong/20170523/"})}}),this},timeDown:function(){function e(e){var i=new Array;i[0]=e.getHours(),i[1]=e.getMinutes(),i[2]=e.getSeconds();var n=60*i[0]*60+60*i[1]+i[2],c=86400-n,o=new Array;o[0]=parseInt(c/3600),console.log("小时",o[0]),o[1]=parseInt((c-60*o[0]*60)/60),console.log("分钟",o[1]),o[2]=c-60*o[0]*60-60*o[1],console.log("秒",o[2]),setInterval(function(){o[2]>0?o[2]--:(o[2]=59,o[1]>0?o[1]--:(o[1]=59,o[0]>0?o[0]--:o[0]=23));for(var e=new Array,i=0;3>i;++i)e[i]=String(o[i]),o[i]<10&&(e[i]="0"+e[i]);var n=e[0]+":"+e[1]+":"+e[2];t(".clockTime .nowTime").html(""),t(".clockTime .nowTime").append(n)},1e3)}2===l||3===l?(2===l?(e(new Date),t(".clockTip").text("距离活动开始还有：")):3===l&&t(".clockTip").text("距离活动结束还有："),e(new Date)):(t(".clockTip").text("活动时间为每周三："),t(".nowTime").text("0~24点"))}};u.start()});