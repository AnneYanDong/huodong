require.config(requireConfig),require(["jquery","fastClick","FullPage","ct","bridge","juicer"],function(e,a,t,o,n,l){var r=e(".mask"),i=Object.create(o.Prompt);i.create().build();var s=Object.create(o.Mask);s.create().build();var c=o.Tool.local();o.Tool.buryPoint();var u={status:{login:!1,msg:""},charge:{loan:null,type:null,pay:null},start:function(){var e=this;a.attach(document.body),o.Tool.setFont(),window.addEventListener("resize",o.Tool.debounce(o.Tool.setFont)),window.addEventListener("resize",o.Tool.debounce(o.Tool.handleBottomStatusBar));var t=Object.create(o.PreLodingUi);t.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),o.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var a=null;clearTimeout(a),a=setTimeout(function(){t.hide(),e.init()},500)}}),o.Ajax.do({url:indexData.ajaxUrl||"test.php",data:{action:"status",test:"look",num:1},success:function(a){0==a.errcode?e.status.login=!0:(e.status.msg=a.errmsg||"出错请重试",i.show(a.errmsg||"出错请重试"))}})},init:function(){var a=this;e(".wp").removeClass("hide"),a.fullPageObj=a.fullpage(),a.apply(),a.openRule(),a.closeRule()},fullpage:function(){var a=this,t=document.getElementsByClassName("wp-inner")[0].fullpage({start:0,beforeChange:function(e){var t="page"+e.next;a.changeState(t)},afterChange:function(t){a.fullPageObj.stop();var o="page"+t.cur;"page0"==o&&(e(".page1 .gift").on("click",function(){s.show(),e(".wp").append('<div class="tipMsg"><img src="../static/img/20170615_msg.png"><div class="receive"></div></div>'),e(".receive").on("click",function(){console.log(4545),e(".tipMsg").remove(),e(".mt-mask").css("display","none"),a.fullPageObj.moveTo(1,!0)})}),e(".process").on("click",function(){console.log(c.origin+"shequ/discovery/index.php?route=account/business&type=3"),window.location.href=c.origin+"shequ/discovery/index.php?route=account/business&type=3"}),a.respondState(o)),"page1"==o&&(e(".page1 li").removeClass("rotate").addClass("grayscale"),e(".page2 li").on("click",function(){r.show();var t=e(this);if(t.hasClass("rotate"))r.hide(),a.fullPageObj.moveTo(2,!0);else{t.siblings().addClass("grayscale").removeClass("animated rotate").end().removeClass("grayscale").addClass("animated");var o=null;clearTimeout(o),o=setTimeout(function(){t.addClass("rotate"),clearTimeout(o),o=setTimeout(function(){a.fullPageObj.moveTo(2,!0),r.hide()},1200)},200)}a.charge.loan=e(this).data("loan-type")}),a.respondState(o,0,!0)),"page2"==o&&(e(".page2 li").removeClass("rotate").addClass("grayscale"),e(".page3 li").on("click",function(){r.show();var t=e(this);t.siblings().addClass("grayscale").removeClass("animated rotate").end().removeClass("grayscale").addClass("animated");var o=null;clearTimeout(o),o=setTimeout(function(){t.addClass("rotate"),clearTimeout(o),o=setTimeout(function(){if(console.log(a.charge),"continue"==a.cardType(a.charge)){var t=null;if(1==a.charge.type)var o=e("#tpl-choose-pf").html();else var o=e("#tpl-choose-gd").html();var n=l(o,t)}else{var t=cardJson[a.cardType(a.charge)];console.log(t);var o=e("#tpl-card").html(),n=l(o,t);l.register("index_add",indexFn);var i=e("#tpl-rule").html(),s=l(i,t);console.log(s)}e(".page4 .content").html("").append(n),e(".rule").remove(),e("body").append(s),r.hide(),a.fullPageObj.moveTo(3,!0)},1200)},200),a.charge.type=e(this).data("card-type")}),a.respondState(o,1,!0,function(){a.charge.loan=null})),"page3"==o&&(e(".page3 li").removeClass("rotate").addClass("grayscale"),e(".page4 .next")&&e(".next li").on("click",function(){r.show();var t=e(this);t.siblings().addClass("grayscale").removeClass("animated rotate").end().removeClass("grayscale").addClass("animated");var o=null;clearTimeout(o),o=setTimeout(function(){t.addClass("rotate"),clearTimeout(o),o=setTimeout(function(){if(console.log(a.charge),"continue"==a.cardType(a.charge))return console.log("错了"),!1;var t=cardJson[a.cardType(a.charge)];console.log(t);var o=e("#tpl-card").html(),n=l(o,t);l.register("index_add",indexFn);var i=e("#tpl-rule").html(),s=l(i,t);e(".page5 .content").html("").append(n),e(".rule").remove(),e("body").append(s),r.hide(),a.fullPageObj.moveTo(4,!0)},1200)},200),a.charge.pay=e(this).data("pay")}),a.respondState(o,2,!0)),"page4"==o&&(e(".page4 li").removeClass("rotate").addClass("grayscale"),a.charge.pay=null,a.respondState(o,3,!0))}});return t},apply:function(){e(".page4,.page5").on("click",".apply",function(){console.log("...");var a=e(this).data("link");o.Ajax.do({url:indexData.ajaxUrl||"test.php",data:{action:"apply",type:a},success:function(e){0==e.errcode?window.location.href=e.url:i.show(e.errmsg||"出错请重试")}})})},changeState:function(e){window.history.pushState&&window.history.pushState({title:e},e,"index.php#page="+e)},respondState:function(e,a,t,l){var r=this,i=o.Tool.userAgent();n&&i.isGjj?n.onBack(function(){return"page0"==e?!1:(t?r.fullPageObj.moveTo(a,!0):r.fullPageObj.moveTo(a),l&&l(),!0)}):window.onpopstate=function(){t?(console.log(r.fullPageObj),r.fullPageObj.moveTo(a,!0)):r.fullPageObj.moveTo(a),l&&l()}},openRule:function(){e(".content").on("click",".rule-btn",function(){s.show(),e(".rule").fadeIn()})},closeRule:function(){e("body").on("click",".btn-close",function(){e(".rule").fadeOut(function(){s.hide()})})},cardType:function(e){if(!e)return!1;if(1==e.loan)if(1==e.type){if(!e.pay)return"continue";if(1==e.pay)return"mk";if(2==e.pay)return"cx"}else{if(2!=e.type)return"lxjy";if(!e.pay)return"continue";if(1==e.pay)return"lt";if(2==e.pay)return"znsw"}else if(2==e.loan)if(1==e.type){if(!e.pay)return"continue";if(1==e.pay)return"mk";if(2==e.pay)return"cx"}else{if(2!=e.type)return"lxy";if(!e.pay)return"continue";if(1==e.pay)return"lt";if(2==e.pay)return"znsw"}}};u.start()});