require.config(requireConfig),require(["jquery","fastClick","FullPage","ct","bridge","juicer"],function(e,t,i,o,n){var c=(e(".mask"),Object.create(o.Prompt));c.create().build();var s=Object.create(o.Mask);s.create().build();o.Tool.local();o.Tool.buryPoint();var a={status:{login:!1,oUrl_1:"",oUrl_2:""},start:function(){var i=this;t.attach(document.body),o.Tool.setFont(),window.addEventListener("resize",o.Tool.debounce(o.Tool.setFont)),window.addEventListener("resize",o.Tool.debounce(o.Tool.handleBottomStatusBar));var n=Object.create(o.PreLodingUi);n.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),o.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var e=null;clearTimeout(e),e=setTimeout(function(){n.hide(),i.init()},500)}}),e.ajax({type:"POST",dataType:"JSON",url:o.Tool.url("/app/request/activity"),data:JSON.stringify({place_cid:o.Tool.userAgent().isGjj?1:0,tag:"进入页面"+projectName}),success:function(e){1==e.success}})},init:function(){var t=this;e(".wp").removeClass("hide"),t.render(),t.pullDown(),t.receive(),t.skip(),t.openRule(),t.closeRule(),t.share()},render:function(){var t=this;e.ajax({type:"POST",dataType:"JSON",url:"/act/act170615/get_status",success:function(i){i.success?1==i.ret.weChat?timer=setTimeout(function(){c.show("本活动需在app参加"),timer=setTimeout(function(){window.location.href="http://d.51gjj.com/"},1500)},200):0==i.ret.login?n&&n.action("login"):(t.status.oUrl_1=i.ret.url_1,t.status.oUrl_2=i.ret.url_2,console.debug(t.status.oUrl_2),1==i.ret.have&&(e(".page1").addClass("hide"),e(".page2").removeClass("hide"))):c.show(i.msg||"出错请重试")}})},pullDown:function(){e(".page1").on("click",".gift",function(){s.show(),e(".wp").append('<div class="tipMsg"><img src="http://r.51gjj.com/act/release/img/20170615_msg.png"><div class="receive" bp="收下" title="收下"></div></div>')})},receive:function(){e(document).on("click",".receive",function(){e.ajax({type:"POST",dataType:"JSON",url:"/act/act170615/get_prize",success:function(t){t.success?(e(".tipMsg").remove(),e(".mt-mask").css("display","none"),window.location.href=t.ret.url):c.show(t.msg||"出错请重试")}})})},skip:function(){var t=this;e(".page2 .looking").on("click",function(){window.location.href=t.status.oUrl_2}),e(".page2 .apply").on("click",function(){window.location.href=t.status.oUrl_1})},openRule:function(){e(".content").on("click",".rule-btn",function(){s.show(),e(".rule").fadeIn()})},closeRule:function(){e("body").on("click",".btn-close",function(){e(".rule").fadeOut(function(){s.hide()})})},share:function(){var e=navigator.userAgent,t={mobile:!!e.match(/AppleWebKit.*Mobile.*/),isAndroid:e.indexOf("Android")>-1||e.indexOf("Linux")>-1||e.indexOf("android")>-1,isiOS:/[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,isGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(e)||/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),isAndroidGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(e),isiOSGjj:/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(e),isGjjFdjsq:/^android\/[\w\W]+client\/[\w\W]+category\/51fdjsq$/.test(e)},i=window.location.host;return t.isGjj&&n&&n.action("quickIcon",{thumb:"https://r.51gjj.com/image/static/ico_title_share_dark.png",onclick:function(){n.action("ShareTimeline",{title:"【父亲节快乐】这些年收获了很多祝福和礼物，但其实…",desc:"给的再多，不如懂你，点击领取父亲节专属礼包！",thumb:"https://r.51gjj.com/act/release/img/20170615_wxshare.png",link:"http://"+i+"/act/home/huodong/20170615/"})}}),this}};a.start()});