require.config(requireConfig),require(["jquery","fastClick","lucky-card","ct","bridge","juicer","marquee"],function(e,t,o,i,n){var a=(e(".mask"),Object.create(i.Prompt));a.create().build();var s=Object.create(i.Mask);s.create().build();i.Tool.local();i.Tool.buryPoint();var c,r,l=((new Date).getDay(),null),u=0,d=0,g={start:function(){var o=this;t.attach(document.body),i.Tool.setFont(),window.addEventListener("resize",i.Tool.debounce(i.Tool.setFont));var n=Object.create(i.PreLodingUi);n.create({preLoadingCls:"loading-bg-color",loadingEleCls:"loading-ele-color"}).build(),l=i.Tool.userAgent(),i.Tool.imgPreLoad({callback:function(){this.hintLog("图片加载完成");var e=null;clearTimeout(e),e=setTimeout(function(){n.hide(),o.init()},500)}}),e.ajax({type:"POST",dataType:"JSON",url:i.Tool.url("/app/request/activity"),data:JSON.stringify({place_cid:i.Tool.userAgent().isGjj?1:0,tag:"进入页面"+projectName}),success:function(e){1==e.success}})},init:function(){var t=this;e(".out-wrap").removeClass("hide"),t.shareToFriend(),t.getChance(),t.raffle(),console.log("送积分活动！")},getChance:function(){e.ajax({type:"POST",dataType:"JSON",url:"/act/act170721/get_status",success:function(e){if(console.log(e),r=e,e.success){var e=e.ret;e.is_weChat||e.is_qq?setTimeout(function(){window.location.href=e.url},1500):e.login?(c=e.invitation_code,e.chance<=0&&a.show("机会用尽啦，不要太贪心哦，邀请好友一起玩")):(a.show("亲爱滴，登陆后才能玩耍哦，快去登陆吧~"),n&&n.action("login"))}}})},raffle:function(){var t=null;clearTimeout(t),e(".wp-inner .content").on("click",".turntable,.arrow",function(){e.ajax({type:"POST",dataType:"JSON",url:"/act/act170721/get_prize",success:function(t){if(console.log(t),t.success){var t=t.ret;t.is_qq||t.is_weChat?setTimeout(function(){window.location.href=t.url},1500):0==t.login?(a.show("亲爱滴，登陆后才能玩耍哦，快去登陆吧~"),n&&n.action("login")):(console.log("机会次数",t.chance),t.chance<=0?a.show("机会用尽啦，不要太贪心哦，邀请好友一起玩"):(console.log("angle->",t.angle),u=t.angle+720,d+=3,"none"==e(".turntable").css("transform")?e(".turntable").css({transform:"rotate("+u+"deg)",transition:"transform 3s ease"}):e(".turntable").css("transform","rotate("+(360*d+t.angle)+"deg)"),setTimeout(function(){a.show("人品爆发，中奖啦！恭喜抽中"+t.gift_name+"!")},3e3)))}else a.show(t.msg||"哎呀，出错了呢")}})})},shareToFriend:function(){var t=this;e(".wp-inner .content").on("click",".btn2",function(){console.log("分享功能"),console.log("request",r),0==r.ret.login?a.show("亲爱滴，登陆后才能玩耍哦，快去登陆吧~"):t.share(c)})},share:function(e){var t=navigator.userAgent,o={mobile:!!t.match(/AppleWebKit.*Mobile.*/),isAndroid:t.indexOf("Android")>-1||t.indexOf("Linux")>-1||t.indexOf("android")>-1,isiOS:/[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),webApp:-1==t.indexOf("Safari"),weixin:t.indexOf("MicroMessenger")>-1,isGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(t)||/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),isAndroidGjj:/^android\/[\w\W]+client\/[\w\W]+theme\/[\w\W]+$/.test(t),isiOSGjj:/^[\w\W]*ios\/[\w\W]+client\/[\w\W]+device\/[\w\W]+theme\/[\w\W]+$/.test(t),isGjjFdjsq:/^android\/[\w\W]+client\/[\w\W]+category\/51fdjsq$/.test(t)},i=window.location.host;return o.isGjj&&n&&n.action("ShareTimeline",{title:"转盘抽奖",desc:"查公积金送积分",thumb:"https://r.51gjj.com/act/release/img/20170721_share.png",link:"https://"+i+"/hd/20160714/invite_out_v2.php?c="+e}),this}};g.start()});